<html>
<head>
<title>numba_sysinfo.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #7a7e85;}
.s5 { color: #2aacb8;}
.s6 { color: #a5c261;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
numba_sysinfo.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">json</span>
<span class="s0">import </span><span class="s1">locale</span>
<span class="s0">import </span><span class="s1">multiprocessing</span>
<span class="s0">import </span><span class="s1">os</span>
<span class="s0">import </span><span class="s1">platform</span>
<span class="s0">import </span><span class="s1">textwrap</span>
<span class="s0">import </span><span class="s1">sys</span>
<span class="s0">from </span><span class="s1">contextlib </span><span class="s0">import </span><span class="s1">redirect_stdout</span>
<span class="s0">from </span><span class="s1">datetime </span><span class="s0">import </span><span class="s1">datetime</span>
<span class="s0">from </span><span class="s1">io </span><span class="s0">import </span><span class="s1">StringIO</span>
<span class="s0">from </span><span class="s1">subprocess </span><span class="s0">import </span><span class="s1">check_output</span><span class="s2">, </span><span class="s1">PIPE</span><span class="s2">, </span><span class="s1">CalledProcessError</span>
<span class="s0">import </span><span class="s1">numpy </span><span class="s0">as </span><span class="s1">np</span>
<span class="s0">import </span><span class="s1">llvmlite</span><span class="s2">.</span><span class="s1">binding </span><span class="s0">as </span><span class="s1">llvmbind</span>
<span class="s0">from </span><span class="s1">llvmlite </span><span class="s0">import </span><span class="s1">__version__ </span><span class="s0">as </span><span class="s1">llvmlite_version</span>
<span class="s0">from </span><span class="s1">numba </span><span class="s0">import </span><span class="s1">cuda </span><span class="s0">as </span><span class="s1">cu</span><span class="s2">, </span><span class="s1">__version__ </span><span class="s0">as </span><span class="s1">version_number</span>
<span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">cuda </span><span class="s0">import </span><span class="s1">cudadrv</span>
<span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">cuda</span><span class="s2">.</span><span class="s1">cudadrv</span><span class="s2">.</span><span class="s1">driver </span><span class="s0">import </span><span class="s1">driver </span><span class="s0">as </span><span class="s1">cudriver</span>
<span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">cuda</span><span class="s2">.</span><span class="s1">cudadrv</span><span class="s2">.</span><span class="s1">runtime </span><span class="s0">import </span><span class="s1">runtime </span><span class="s0">as </span><span class="s1">curuntime</span>
<span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">core </span><span class="s0">import </span><span class="s1">config</span>

<span class="s1">_psutil_import </span><span class="s2">= </span><span class="s0">False</span>
<span class="s0">try</span><span class="s2">:</span>
    <span class="s0">import </span><span class="s1">psutil</span>
<span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
    <span class="s0">pass</span>
<span class="s0">else</span><span class="s2">:</span>
    <span class="s1">_psutil_import </span><span class="s2">= </span><span class="s0">True</span>

<span class="s1">__all__ </span><span class="s2">= [</span><span class="s3">'get_sysinfo'</span><span class="s2">, </span><span class="s3">'display_sysinfo'</span><span class="s2">]</span>

<span class="s4"># Keys of a `sysinfo` dictionary</span>

<span class="s4"># Time info</span>
<span class="s1">_start</span><span class="s2">, </span><span class="s1">_start_utc</span><span class="s2">, </span><span class="s1">_runtime </span><span class="s2">= </span><span class="s3">'Start'</span><span class="s2">, </span><span class="s3">'Start UTC'</span><span class="s2">, </span><span class="s3">'Runtime'</span>
<span class="s1">_numba_version </span><span class="s2">= </span><span class="s3">'Numba Version'</span>
<span class="s4"># Hardware info</span>
<span class="s1">_machine </span><span class="s2">= </span><span class="s3">'Machine'</span>
<span class="s1">_cpu_name</span><span class="s2">, </span><span class="s1">_cpu_count </span><span class="s2">= </span><span class="s3">'CPU Name'</span><span class="s2">, </span><span class="s3">'CPU Count'</span>
<span class="s1">_cpus_allowed</span><span class="s2">, </span><span class="s1">_cpus_list </span><span class="s2">= </span><span class="s3">'CPUs Allowed'</span><span class="s2">, </span><span class="s3">'List CPUs Allowed'</span>
<span class="s1">_cpu_features </span><span class="s2">= </span><span class="s3">'CPU Features'</span>
<span class="s1">_cfs_quota</span><span class="s2">, </span><span class="s1">_cfs_period </span><span class="s2">= </span><span class="s3">'CFS Quota'</span><span class="s2">, </span><span class="s3">'CFS Period'</span><span class="s2">,</span>
<span class="s1">_cfs_restrict </span><span class="s2">= </span><span class="s3">'CFS Restriction'</span>
<span class="s1">_mem_total</span><span class="s2">, </span><span class="s1">_mem_available </span><span class="s2">= </span><span class="s3">'Mem Total'</span><span class="s2">, </span><span class="s3">'Mem Available'</span>
<span class="s4"># OS info</span>
<span class="s1">_platform_name</span><span class="s2">, </span><span class="s1">_platform_release </span><span class="s2">= </span><span class="s3">'Platform Name'</span><span class="s2">, </span><span class="s3">'Platform Release'</span>
<span class="s1">_os_name</span><span class="s2">, </span><span class="s1">_os_version </span><span class="s2">= </span><span class="s3">'OS Name'</span><span class="s2">, </span><span class="s3">'OS Version'</span>
<span class="s1">_os_spec_version </span><span class="s2">= </span><span class="s3">'OS Specific Version'</span>
<span class="s1">_libc_version </span><span class="s2">= </span><span class="s3">'Libc Version'</span>
<span class="s4"># Python info</span>
<span class="s1">_python_comp </span><span class="s2">= </span><span class="s3">'Python Compiler'</span>
<span class="s1">_python_impl </span><span class="s2">= </span><span class="s3">'Python Implementation'</span>
<span class="s1">_python_version </span><span class="s2">= </span><span class="s3">'Python Version'</span>
<span class="s1">_python_locale </span><span class="s2">= </span><span class="s3">'Python Locale'</span>
<span class="s4"># LLVM info</span>
<span class="s1">_llvmlite_version </span><span class="s2">= </span><span class="s3">'llvmlite Version'</span>
<span class="s1">_llvm_version </span><span class="s2">= </span><span class="s3">'LLVM Version'</span>
<span class="s4"># CUDA info</span>
<span class="s1">_cu_dev_init </span><span class="s2">= </span><span class="s3">'CUDA Device Init'</span>
<span class="s1">_cu_drv_ver </span><span class="s2">= </span><span class="s3">'CUDA Driver Version'</span>
<span class="s1">_cu_rt_ver </span><span class="s2">= </span><span class="s3">'CUDA Runtime Version'</span>
<span class="s1">_cu_nvidia_bindings </span><span class="s2">= </span><span class="s3">'NVIDIA CUDA Bindings'</span>
<span class="s1">_cu_nvidia_bindings_used </span><span class="s2">= </span><span class="s3">'NVIDIA CUDA Bindings In Use'</span>
<span class="s1">_cu_detect_out</span><span class="s2">, </span><span class="s1">_cu_lib_test </span><span class="s2">= </span><span class="s3">'CUDA Detect Output'</span><span class="s2">, </span><span class="s3">'CUDA Lib Test'</span>
<span class="s1">_cu_mvc_available </span><span class="s2">= </span><span class="s3">'NVIDIA CUDA Minor Version Compatibility Available'</span>
<span class="s1">_cu_mvc_needed </span><span class="s2">= </span><span class="s3">'NVIDIA CUDA Minor Version Compatibility Needed'</span>
<span class="s1">_cu_mvc_in_use </span><span class="s2">= </span><span class="s3">'NVIDIA CUDA Minor Version Compatibility In Use'</span>
<span class="s4"># NumPy info</span>
<span class="s1">_numpy_version </span><span class="s2">= </span><span class="s3">'NumPy Version'</span>
<span class="s1">_numpy_supported_simd_features </span><span class="s2">= </span><span class="s3">'NumPy Supported SIMD features'</span>
<span class="s1">_numpy_supported_simd_dispatch </span><span class="s2">= </span><span class="s3">'NumPy Supported SIMD dispatch'</span>
<span class="s1">_numpy_supported_simd_baseline </span><span class="s2">= </span><span class="s3">'NumPy Supported SIMD baseline'</span>
<span class="s1">_numpy_AVX512_SKX_detected </span><span class="s2">= </span><span class="s3">'NumPy AVX512_SKX detected'</span>
<span class="s4"># SVML info</span>
<span class="s1">_svml_state</span><span class="s2">, </span><span class="s1">_svml_loaded </span><span class="s2">= </span><span class="s3">'SVML State'</span><span class="s2">, </span><span class="s3">'SVML Lib Loaded'</span>
<span class="s1">_llvm_svml_patched </span><span class="s2">= </span><span class="s3">'LLVM SVML Patched'</span>
<span class="s1">_svml_operational </span><span class="s2">= </span><span class="s3">'SVML Operational'</span>
<span class="s4"># Threading layer info</span>
<span class="s1">_tbb_thread</span><span class="s2">, </span><span class="s1">_tbb_error </span><span class="s2">= </span><span class="s3">'TBB Threading'</span><span class="s2">, </span><span class="s3">'TBB Threading Error'</span>
<span class="s1">_openmp_thread</span><span class="s2">, </span><span class="s1">_openmp_error </span><span class="s2">= </span><span class="s3">'OpenMP Threading'</span><span class="s2">, </span><span class="s3">'OpenMP Threading Error'</span>
<span class="s1">_openmp_vendor </span><span class="s2">= </span><span class="s3">'OpenMP vendor'</span>
<span class="s1">_wkq_thread</span><span class="s2">, </span><span class="s1">_wkq_error </span><span class="s2">= </span><span class="s3">'Workqueue Threading'</span><span class="s2">, </span><span class="s3">'Workqueue Threading Error'</span>
<span class="s4"># Numba info</span>
<span class="s1">_numba_env_vars </span><span class="s2">= </span><span class="s3">'Numba Env Vars'</span>
<span class="s4"># Conda info</span>
<span class="s1">_conda_build_ver</span><span class="s2">, </span><span class="s1">_conda_env_ver </span><span class="s2">= </span><span class="s3">'Conda Build'</span><span class="s2">, </span><span class="s3">'Conda Env'</span>
<span class="s1">_conda_platform</span><span class="s2">, </span><span class="s1">_conda_python_ver </span><span class="s2">= </span><span class="s3">'Conda Platform'</span><span class="s2">, </span><span class="s3">'Conda Python Version'</span>
<span class="s1">_conda_root_writable </span><span class="s2">= </span><span class="s3">'Conda Root Writable'</span>
<span class="s4"># Packages info</span>
<span class="s1">_inst_pkg </span><span class="s2">= </span><span class="s3">'Installed Packages'</span>
<span class="s4"># Psutil info</span>
<span class="s1">_psutil </span><span class="s2">= </span><span class="s3">'Psutil Available'</span>
<span class="s4"># Errors and warnings</span>
<span class="s1">_errors </span><span class="s2">= </span><span class="s3">'Errors'</span>
<span class="s1">_warnings </span><span class="s2">= </span><span class="s3">'Warnings'</span>

<span class="s4"># Error and warning log</span>
<span class="s1">_error_log </span><span class="s2">= []</span>
<span class="s1">_warning_log </span><span class="s2">= []</span>


<span class="s0">def </span><span class="s1">get_os_spec_info</span><span class="s2">(</span><span class="s1">os_name</span><span class="s2">):</span>
    <span class="s4"># Linux man page for `/proc`:</span>
    <span class="s4"># http://man7.org/linux/man-pages/man5/proc.5.html</span>

    <span class="s4"># Windows documentation for `wmic OS`:</span>
    <span class="s4"># https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/cim-operatingsystem</span>

    <span class="s4"># MacOS man page for `sysctl`:</span>
    <span class="s4"># https://www.unix.com/man-page/osx/3/sysctl/</span>
    <span class="s4"># MacOS man page for `vm_stat`:</span>
    <span class="s4"># https://www.unix.com/man-page/osx/1/vm_stat/</span>

    <span class="s0">class </span><span class="s1">CmdBufferOut</span><span class="s2">(</span><span class="s1">tuple</span><span class="s2">):</span>
        <span class="s1">buffer_output_flag </span><span class="s2">= </span><span class="s0">True</span>

    <span class="s0">class </span><span class="s1">CmdReadFile</span><span class="s2">(</span><span class="s1">tuple</span><span class="s2">):</span>
        <span class="s1">read_file_flag </span><span class="s2">= </span><span class="s0">True</span>

    <span class="s1">shell_params </span><span class="s2">= {</span>
        <span class="s3">'Linux'</span><span class="s2">: {</span>
            <span class="s3">'cmd'</span><span class="s2">: (</span>
                <span class="s1">CmdReadFile</span><span class="s2">((</span><span class="s3">'/sys/fs/cgroup/cpuacct/cpu.cfs_quota_us'</span><span class="s2">,)),</span>
                <span class="s1">CmdReadFile</span><span class="s2">((</span><span class="s3">'/sys/fs/cgroup/cpuacct/cpu.cfs_period_us'</span><span class="s2">,)),</span>
            <span class="s2">),</span>
            <span class="s3">'cmd_optional'</span><span class="s2">: (</span>
                <span class="s1">CmdReadFile</span><span class="s2">((</span><span class="s3">'/proc/meminfo'</span><span class="s2">,)),</span>
                <span class="s1">CmdReadFile</span><span class="s2">((</span><span class="s3">'/proc/self/status'</span><span class="s2">,)),</span>
            <span class="s2">),</span>
            <span class="s3">'kwds'</span><span class="s2">: {</span>
                <span class="s4"># output string fragment -&gt; result dict key</span>
                <span class="s3">'MemTotal:'</span><span class="s2">: </span><span class="s1">_mem_total</span><span class="s2">,</span>
                <span class="s3">'MemAvailable:'</span><span class="s2">: </span><span class="s1">_mem_available</span><span class="s2">,</span>
                <span class="s3">'Cpus_allowed:'</span><span class="s2">: </span><span class="s1">_cpus_allowed</span><span class="s2">,</span>
                <span class="s3">'Cpus_allowed_list:'</span><span class="s2">: </span><span class="s1">_cpus_list</span><span class="s2">,</span>
                <span class="s3">'/sys/fs/cgroup/cpuacct/cpu.cfs_quota_us'</span><span class="s2">: </span><span class="s1">_cfs_quota</span><span class="s2">,</span>
                <span class="s3">'/sys/fs/cgroup/cpuacct/cpu.cfs_period_us'</span><span class="s2">: </span><span class="s1">_cfs_period</span><span class="s2">,</span>
            <span class="s2">},</span>
        <span class="s2">},</span>
        <span class="s3">'Windows'</span><span class="s2">: {</span>
            <span class="s3">'cmd'</span><span class="s2">: (),</span>
            <span class="s3">'cmd_optional'</span><span class="s2">: (</span>
                <span class="s1">CmdBufferOut</span><span class="s2">((</span><span class="s3">'wmic'</span><span class="s2">, </span><span class="s3">'OS'</span><span class="s2">, </span><span class="s3">'get'</span><span class="s2">, </span><span class="s3">'TotalVirtualMemorySize'</span><span class="s2">)),</span>
                <span class="s1">CmdBufferOut</span><span class="s2">((</span><span class="s3">'wmic'</span><span class="s2">, </span><span class="s3">'OS'</span><span class="s2">, </span><span class="s3">'get'</span><span class="s2">, </span><span class="s3">'FreeVirtualMemory'</span><span class="s2">)),</span>
            <span class="s2">),</span>
            <span class="s3">'kwds'</span><span class="s2">: {</span>
                <span class="s4"># output string fragment -&gt; result dict key</span>
                <span class="s3">'TotalVirtualMemorySize'</span><span class="s2">: </span><span class="s1">_mem_total</span><span class="s2">,</span>
                <span class="s3">'FreeVirtualMemory'</span><span class="s2">: </span><span class="s1">_mem_available</span><span class="s2">,</span>
            <span class="s2">},</span>
        <span class="s2">},</span>
        <span class="s3">'Darwin'</span><span class="s2">: {</span>
            <span class="s3">'cmd'</span><span class="s2">: (),</span>
            <span class="s3">'cmd_optional'</span><span class="s2">: (</span>
                <span class="s2">(</span><span class="s3">'sysctl'</span><span class="s2">, </span><span class="s3">'hw.memsize'</span><span class="s2">),</span>
                <span class="s2">(</span><span class="s3">'vm_stat'</span><span class="s2">),</span>
            <span class="s2">),</span>
            <span class="s3">'kwds'</span><span class="s2">: {</span>
                <span class="s4"># output string fragment -&gt; result dict key</span>
                <span class="s3">'hw.memsize:'</span><span class="s2">: </span><span class="s1">_mem_total</span><span class="s2">,</span>
                <span class="s3">'free:'</span><span class="s2">: </span><span class="s1">_mem_available</span><span class="s2">,</span>
            <span class="s2">},</span>
            <span class="s3">'units'</span><span class="s2">: {</span>
                <span class="s1">_mem_total</span><span class="s2">: </span><span class="s5">1</span><span class="s2">,  </span><span class="s4"># Size is given in bytes.</span>
                <span class="s1">_mem_available</span><span class="s2">: </span><span class="s5">4096</span><span class="s2">,  </span><span class="s4"># Size is given in 4kB pages.</span>
            <span class="s2">},</span>
        <span class="s2">},</span>
    <span class="s2">}</span>

    <span class="s1">os_spec_info </span><span class="s2">= {}</span>
    <span class="s1">params </span><span class="s2">= </span><span class="s1">shell_params</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">os_name</span><span class="s2">, {})</span>
    <span class="s1">cmd_selected </span><span class="s2">= </span><span class="s1">params</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">'cmd'</span><span class="s2">, ())</span>

    <span class="s0">if </span><span class="s1">_psutil_import</span><span class="s2">:</span>
        <span class="s1">vm </span><span class="s2">= </span><span class="s1">psutil</span><span class="s2">.</span><span class="s1">virtual_memory</span><span class="s2">()</span>
        <span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">update</span><span class="s2">({</span>
            <span class="s1">_mem_total</span><span class="s2">: </span><span class="s1">vm</span><span class="s2">.</span><span class="s1">total</span><span class="s2">,</span>
            <span class="s1">_mem_available</span><span class="s2">: </span><span class="s1">vm</span><span class="s2">.</span><span class="s1">available</span><span class="s2">,</span>
        <span class="s2">})</span>
        <span class="s1">p </span><span class="s2">= </span><span class="s1">psutil</span><span class="s2">.</span><span class="s1">Process</span><span class="s2">()</span>
        <span class="s1">cpus_allowed </span><span class="s2">= </span><span class="s1">p</span><span class="s2">.</span><span class="s1">cpu_affinity</span><span class="s2">() </span><span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">p</span><span class="s2">, </span><span class="s3">'cpu_affinity'</span><span class="s2">) </span><span class="s0">else </span><span class="s2">[]</span>
        <span class="s0">if </span><span class="s1">cpus_allowed</span><span class="s2">:</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cpus_allowed</span><span class="s2">] = </span><span class="s1">len</span><span class="s2">(</span><span class="s1">cpus_allowed</span><span class="s2">)</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cpus_list</span><span class="s2">] = </span><span class="s3">' '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">str</span><span class="s2">(</span><span class="s1">n</span><span class="s2">) </span><span class="s0">for </span><span class="s1">n </span><span class="s0">in </span><span class="s1">cpus_allowed</span><span class="s2">)</span>

    <span class="s0">else</span><span class="s2">:</span>
        <span class="s1">_warning_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span>
            <span class="s3">&quot;Warning (psutil): psutil cannot be imported. &quot;</span>
            <span class="s3">&quot;For more accuracy, consider installing it.&quot;</span><span class="s2">)</span>
        <span class="s4"># Fallback to internal heuristics</span>
        <span class="s1">cmd_selected </span><span class="s2">+= </span><span class="s1">params</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">'cmd_optional'</span><span class="s2">, ())</span>

    <span class="s4"># Assuming the shell cmd returns a unique (k, v) pair per line</span>
    <span class="s4"># or a unique (k, v) pair spread over several lines:</span>
    <span class="s4"># Gather output in a list of strings containing a keyword and some value.</span>
    <span class="s1">output </span><span class="s2">= []</span>
    <span class="s0">for </span><span class="s1">cmd </span><span class="s0">in </span><span class="s1">cmd_selected</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">, </span><span class="s3">'read_file_flag'</span><span class="s2">):</span>
            <span class="s4"># Open file within Python</span>
            <span class="s0">if </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">exists</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]):</span>
                <span class="s0">try</span><span class="s2">:</span>
                    <span class="s0">with </span><span class="s1">open</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">[</span><span class="s5">0</span><span class="s2">], </span><span class="s3">'r'</span><span class="s2">) </span><span class="s0">as </span><span class="s1">f</span><span class="s2">:</span>
                        <span class="s1">out </span><span class="s2">= </span><span class="s1">f</span><span class="s2">.</span><span class="s1">readlines</span><span class="s2">()</span>
                        <span class="s0">if </span><span class="s1">out</span><span class="s2">:</span>
                            <span class="s1">out</span><span class="s2">[</span><span class="s5">0</span><span class="s2">] = </span><span class="s3">' '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">((</span><span class="s1">cmd</span><span class="s2">[</span><span class="s5">0</span><span class="s2">], </span><span class="s1">out</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]))</span>
                            <span class="s1">output</span><span class="s2">.</span><span class="s1">extend</span><span class="s2">(</span><span class="s1">out</span><span class="s2">)</span>
                <span class="s0">except </span><span class="s1">OSError </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
                    <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (file read): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>
                    <span class="s0">continue</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">_warning_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">'Warning (no file): {}'</span><span class="s2">.</span><span class="s1">format</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]))</span>
                <span class="s0">continue</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s4"># Spawn a subprocess</span>
            <span class="s0">try</span><span class="s2">:</span>
                <span class="s1">out </span><span class="s2">= </span><span class="s1">check_output</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">, </span><span class="s1">stderr</span><span class="s2">=</span><span class="s1">PIPE</span><span class="s2">)</span>
            <span class="s0">except </span><span class="s2">(</span><span class="s1">OSError</span><span class="s2">, </span><span class="s1">CalledProcessError</span><span class="s2">) </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
                <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (subprocess): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>
                <span class="s0">continue</span>
            <span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">, </span><span class="s3">'buffer_output_flag'</span><span class="s2">):</span>
                <span class="s1">out </span><span class="s2">= </span><span class="s6">b' '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">line </span><span class="s0">for </span><span class="s1">line </span><span class="s0">in </span><span class="s1">out</span><span class="s2">.</span><span class="s1">splitlines</span><span class="s2">()) + </span><span class="s6">b'</span><span class="s0">\n</span><span class="s6">'</span>
            <span class="s1">output</span><span class="s2">.</span><span class="s1">extend</span><span class="s2">(</span><span class="s1">out</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">().</span><span class="s1">splitlines</span><span class="s2">())</span>

    <span class="s4"># Extract (k, output) pairs by searching for keywords in output</span>
    <span class="s1">kwds </span><span class="s2">= </span><span class="s1">params</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">'kwds'</span><span class="s2">, {})</span>
    <span class="s0">for </span><span class="s1">line </span><span class="s0">in </span><span class="s1">output</span><span class="s2">:</span>
        <span class="s1">match </span><span class="s2">= </span><span class="s1">kwds</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">() &amp; </span><span class="s1">line</span><span class="s2">.</span><span class="s1">split</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">match </span><span class="s0">and </span><span class="s1">len</span><span class="s2">(</span><span class="s1">match</span><span class="s2">) == </span><span class="s5">1</span><span class="s2">:</span>
            <span class="s1">k </span><span class="s2">= </span><span class="s1">kwds</span><span class="s2">[</span><span class="s1">match</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">()]</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">k</span><span class="s2">] = </span><span class="s1">line</span>
        <span class="s0">elif </span><span class="s1">len</span><span class="s2">(</span><span class="s1">match</span><span class="s2">) &gt; </span><span class="s5">1</span><span class="s2">:</span>
            <span class="s1">print</span><span class="s2">(</span><span class="s3">f'Ambiguous output: </span><span class="s0">{</span><span class="s1">line</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>

    <span class="s4"># Try to extract something meaningful from output string</span>
    <span class="s0">def </span><span class="s1">format</span><span class="s2">():</span>
        <span class="s4"># CFS restrictions</span>
        <span class="s1">split </span><span class="s2">= </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cfs_quota</span><span class="s2">, </span><span class="s3">''</span><span class="s2">).</span><span class="s1">split</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">split</span><span class="s2">:</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cfs_quota</span><span class="s2">] = </span><span class="s1">float</span><span class="s2">(</span><span class="s1">split</span><span class="s2">[-</span><span class="s5">1</span><span class="s2">])</span>
        <span class="s1">split </span><span class="s2">= </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cfs_period</span><span class="s2">, </span><span class="s3">''</span><span class="s2">).</span><span class="s1">split</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">split</span><span class="s2">:</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cfs_period</span><span class="s2">] = </span><span class="s1">float</span><span class="s2">(</span><span class="s1">split</span><span class="s2">[-</span><span class="s5">1</span><span class="s2">])</span>
        <span class="s0">if </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cfs_quota</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">) != -</span><span class="s5">1</span><span class="s2">:</span>
            <span class="s1">cfs_quota </span><span class="s2">= </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cfs_quota</span><span class="s2">, </span><span class="s3">''</span><span class="s2">)</span>
            <span class="s1">cfs_period </span><span class="s2">= </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cfs_period</span><span class="s2">, </span><span class="s3">''</span><span class="s2">)</span>
            <span class="s1">runtime_amount </span><span class="s2">= </span><span class="s1">cfs_quota </span><span class="s2">/ </span><span class="s1">cfs_period</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cfs_restrict</span><span class="s2">] = </span><span class="s1">runtime_amount</span>

    <span class="s0">def </span><span class="s1">format_optional</span><span class="s2">():</span>
        <span class="s4"># Memory</span>
        <span class="s1">units </span><span class="s2">= {</span><span class="s1">_mem_total</span><span class="s2">: </span><span class="s5">1024</span><span class="s2">, </span><span class="s1">_mem_available</span><span class="s2">: </span><span class="s5">1024</span><span class="s2">}</span>
        <span class="s1">units</span><span class="s2">.</span><span class="s1">update</span><span class="s2">(</span><span class="s1">params</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">'units'</span><span class="s2">, {}))</span>
        <span class="s0">for </span><span class="s1">k </span><span class="s0">in </span><span class="s2">(</span><span class="s1">_mem_total</span><span class="s2">, </span><span class="s1">_mem_available</span><span class="s2">):</span>
            <span class="s1">digits </span><span class="s2">= </span><span class="s3">''</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">d </span><span class="s0">for </span><span class="s1">d </span><span class="s0">in </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">k</span><span class="s2">, </span><span class="s3">''</span><span class="s2">) </span><span class="s0">if </span><span class="s1">d</span><span class="s2">.</span><span class="s1">isdigit</span><span class="s2">())</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">k</span><span class="s2">] = </span><span class="s1">int</span><span class="s2">(</span><span class="s1">digits </span><span class="s0">or </span><span class="s5">0</span><span class="s2">) * </span><span class="s1">units</span><span class="s2">[</span><span class="s1">k</span><span class="s2">]</span>
        <span class="s4"># Accessible CPUs</span>
        <span class="s1">split </span><span class="s2">= </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpus_allowed</span><span class="s2">, </span><span class="s3">''</span><span class="s2">).</span><span class="s1">split</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">split</span><span class="s2">:</span>
            <span class="s1">n </span><span class="s2">= </span><span class="s1">split</span><span class="s2">[-</span><span class="s5">1</span><span class="s2">]</span>
            <span class="s1">n </span><span class="s2">= </span><span class="s1">n</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s3">','</span><span class="s2">)[-</span><span class="s5">1</span><span class="s2">]</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cpus_allowed</span><span class="s2">] = </span><span class="s1">str</span><span class="s2">(</span><span class="s1">bin</span><span class="s2">(</span><span class="s1">int</span><span class="s2">(</span><span class="s1">n </span><span class="s0">or </span><span class="s5">0</span><span class="s2">, </span><span class="s5">16</span><span class="s2">))).</span><span class="s1">count</span><span class="s2">(</span><span class="s3">'1'</span><span class="s2">)</span>
        <span class="s1">split </span><span class="s2">= </span><span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpus_list</span><span class="s2">, </span><span class="s3">''</span><span class="s2">).</span><span class="s1">split</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">split</span><span class="s2">:</span>
            <span class="s1">os_spec_info</span><span class="s2">[</span><span class="s1">_cpus_list</span><span class="s2">] = </span><span class="s1">split</span><span class="s2">[-</span><span class="s5">1</span><span class="s2">]</span>

    <span class="s0">try</span><span class="s2">:</span>
        <span class="s1">format</span><span class="s2">()</span>
        <span class="s0">if not </span><span class="s1">_psutil_import</span><span class="s2">:</span>
            <span class="s1">format_optional</span><span class="s2">()</span>
    <span class="s0">except </span><span class="s1">Exception </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (format shell output): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>

    <span class="s4"># Call OS specific functions</span>
    <span class="s1">os_specific_funcs </span><span class="s2">= {</span>
        <span class="s3">'Linux'</span><span class="s2">: {</span>
            <span class="s1">_libc_version</span><span class="s2">: </span><span class="s0">lambda</span><span class="s2">: </span><span class="s3">' '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">platform</span><span class="s2">.</span><span class="s1">libc_ver</span><span class="s2">())</span>
        <span class="s2">},</span>
        <span class="s3">'Windows'</span><span class="s2">: {</span>
            <span class="s1">_os_spec_version</span><span class="s2">: </span><span class="s0">lambda</span><span class="s2">: </span><span class="s3">' '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span>
                <span class="s1">s </span><span class="s0">for </span><span class="s1">s </span><span class="s0">in </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">win32_ver</span><span class="s2">()),</span>
        <span class="s2">},</span>
        <span class="s3">'Darwin'</span><span class="s2">: {</span>
            <span class="s1">_os_spec_version</span><span class="s2">: </span><span class="s0">lambda</span><span class="s2">: </span><span class="s3">''</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span>
                <span class="s1">i </span><span class="s0">or </span><span class="s3">' ' </span><span class="s0">for </span><span class="s1">s </span><span class="s0">in </span><span class="s1">tuple</span><span class="s2">(</span><span class="s1">platform</span><span class="s2">.</span><span class="s1">mac_ver</span><span class="s2">()) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">s</span><span class="s2">),</span>
        <span class="s2">},</span>
    <span class="s2">}</span>
    <span class="s1">key_func </span><span class="s2">= </span><span class="s1">os_specific_funcs</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">os_name</span><span class="s2">, {})</span>
    <span class="s1">os_spec_info</span><span class="s2">.</span><span class="s1">update</span><span class="s2">({</span><span class="s1">k</span><span class="s2">: </span><span class="s1">f</span><span class="s2">() </span><span class="s0">for </span><span class="s1">k</span><span class="s2">, </span><span class="s1">f </span><span class="s0">in </span><span class="s1">key_func</span><span class="s2">.</span><span class="s1">items</span><span class="s2">()})</span>
    <span class="s0">return </span><span class="s1">os_spec_info</span>


<span class="s0">def </span><span class="s1">get_sysinfo</span><span class="s2">():</span>

    <span class="s4"># Gather the information that shouldn't raise exceptions</span>
    <span class="s1">sys_info </span><span class="s2">= {</span>
        <span class="s1">_start</span><span class="s2">: </span><span class="s1">datetime</span><span class="s2">.</span><span class="s1">now</span><span class="s2">(),</span>
        <span class="s1">_start_utc</span><span class="s2">: </span><span class="s1">datetime</span><span class="s2">.</span><span class="s1">utcnow</span><span class="s2">(),</span>
        <span class="s1">_machine</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">machine</span><span class="s2">(),</span>
        <span class="s1">_cpu_name</span><span class="s2">: </span><span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">get_host_cpu_name</span><span class="s2">(),</span>
        <span class="s1">_cpu_count</span><span class="s2">: </span><span class="s1">multiprocessing</span><span class="s2">.</span><span class="s1">cpu_count</span><span class="s2">(),</span>
        <span class="s1">_platform_name</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">platform</span><span class="s2">(</span><span class="s1">aliased</span><span class="s2">=</span><span class="s0">True</span><span class="s2">),</span>
        <span class="s1">_platform_release</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">release</span><span class="s2">(),</span>
        <span class="s1">_os_name</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">system</span><span class="s2">(),</span>
        <span class="s1">_os_version</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">version</span><span class="s2">(),</span>
        <span class="s1">_python_comp</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">python_compiler</span><span class="s2">(),</span>
        <span class="s1">_python_impl</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">python_implementation</span><span class="s2">(),</span>
        <span class="s1">_python_version</span><span class="s2">: </span><span class="s1">platform</span><span class="s2">.</span><span class="s1">python_version</span><span class="s2">(),</span>
        <span class="s1">_numba_env_vars</span><span class="s2">: {</span><span class="s1">k</span><span class="s2">: </span><span class="s1">v </span><span class="s0">for </span><span class="s2">(</span><span class="s1">k</span><span class="s2">, </span><span class="s1">v</span><span class="s2">) </span><span class="s0">in </span><span class="s1">os</span><span class="s2">.</span><span class="s1">environ</span><span class="s2">.</span><span class="s1">items</span><span class="s2">()</span>
                          <span class="s0">if </span><span class="s1">k</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'NUMBA_'</span><span class="s2">)},</span>
        <span class="s1">_numba_version</span><span class="s2">: </span><span class="s1">version_number</span><span class="s2">,</span>
        <span class="s1">_llvm_version</span><span class="s2">: </span><span class="s3">'.'</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">str</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">llvm_version_info</span><span class="s2">),</span>
        <span class="s1">_llvmlite_version</span><span class="s2">: </span><span class="s1">llvmlite_version</span><span class="s2">,</span>
        <span class="s1">_psutil</span><span class="s2">: </span><span class="s1">_psutil_import</span><span class="s2">,</span>
    <span class="s2">}</span>

    <span class="s4"># CPU features</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s1">feature_map </span><span class="s2">= </span><span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">get_host_cpu_features</span><span class="s2">()</span>
    <span class="s0">except </span><span class="s1">RuntimeError </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (CPU features): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>
    <span class="s0">else</span><span class="s2">:</span>
        <span class="s1">features </span><span class="s2">= </span><span class="s1">sorted</span><span class="s2">([</span><span class="s1">key </span><span class="s0">for </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value </span><span class="s0">in </span><span class="s1">feature_map</span><span class="s2">.</span><span class="s1">items</span><span class="s2">() </span><span class="s0">if </span><span class="s1">value</span><span class="s2">])</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cpu_features</span><span class="s2">] = </span><span class="s3">' '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">features</span><span class="s2">)</span>

    <span class="s4"># Python locale</span>
    <span class="s4"># On MacOSX, getdefaultlocale can raise. Check again if Py &gt; 3.7.5</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s4"># If $LANG is unset, getdefaultlocale() can return (None, None), make</span>
        <span class="s4"># sure we can encode this as strings by casting explicitly.</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_python_locale</span><span class="s2">] = </span><span class="s3">'.'</span><span class="s2">.</span><span class="s1">join</span><span class="s2">([</span><span class="s1">str</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in</span>
                                             <span class="s1">locale</span><span class="s2">.</span><span class="s1">getdefaultlocale</span><span class="s2">()])</span>
    <span class="s0">except </span><span class="s1">Exception </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (locale): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>

    <span class="s4"># CUDA information</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s1">cu</span><span class="s2">.</span><span class="s1">list_devices</span><span class="s2">()[</span><span class="s5">0</span><span class="s2">]  </span><span class="s4"># will a device initialise?</span>
    <span class="s0">except </span><span class="s1">Exception </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_dev_init</span><span class="s2">] = </span><span class="s0">False</span>
        <span class="s1">msg_not_found </span><span class="s2">= </span><span class="s3">&quot;CUDA driver library cannot be found&quot;</span>
        <span class="s1">msg_disabled_by_user </span><span class="s2">= </span><span class="s3">&quot;CUDA is disabled&quot;</span>
        <span class="s1">msg_end </span><span class="s2">= </span><span class="s3">&quot; or no CUDA enabled devices are present.&quot;</span>
        <span class="s1">msg_generic_problem </span><span class="s2">= </span><span class="s3">&quot;CUDA device initialisation problem.&quot;</span>
        <span class="s1">msg </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">, </span><span class="s3">'msg'</span><span class="s2">, </span><span class="s0">None</span><span class="s2">)</span>
        <span class="s0">if </span><span class="s1">msg </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s0">if </span><span class="s1">msg_not_found </span><span class="s0">in </span><span class="s1">msg</span><span class="s2">:</span>
                <span class="s1">err_msg </span><span class="s2">= </span><span class="s1">msg_not_found </span><span class="s2">+ </span><span class="s1">msg_end</span>
            <span class="s0">elif </span><span class="s1">msg_disabled_by_user </span><span class="s0">in </span><span class="s1">msg</span><span class="s2">:</span>
                <span class="s1">err_msg </span><span class="s2">= </span><span class="s1">msg_disabled_by_user </span><span class="s2">+ </span><span class="s1">msg_end</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">err_msg </span><span class="s2">= </span><span class="s1">msg_generic_problem </span><span class="s2">+ </span><span class="s3">&quot; Message:&quot; </span><span class="s2">+ </span><span class="s1">msg</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">err_msg </span><span class="s2">= </span><span class="s1">msg_generic_problem </span><span class="s2">+ </span><span class="s3">&quot; &quot; </span><span class="s2">+ </span><span class="s1">str</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)</span>
        <span class="s4"># Best effort error report</span>
        <span class="s1">_warning_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">&quot;Warning (cuda): %s</span><span class="s0">\n</span><span class="s3">Exception class: %s&quot; </span><span class="s2">%</span>
                            <span class="s2">(</span><span class="s1">err_msg</span><span class="s2">, </span><span class="s1">str</span><span class="s2">(</span><span class="s1">type</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))))</span>
    <span class="s0">else</span><span class="s2">:</span>
        <span class="s0">try</span><span class="s2">:</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_dev_init</span><span class="s2">] = </span><span class="s0">True</span>

            <span class="s1">output </span><span class="s2">= </span><span class="s1">StringIO</span><span class="s2">()</span>
            <span class="s0">with </span><span class="s1">redirect_stdout</span><span class="s2">(</span><span class="s1">output</span><span class="s2">):</span>
                <span class="s1">cu</span><span class="s2">.</span><span class="s1">detect</span><span class="s2">()</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_detect_out</span><span class="s2">] = </span><span class="s1">output</span><span class="s2">.</span><span class="s1">getvalue</span><span class="s2">()</span>
            <span class="s1">output</span><span class="s2">.</span><span class="s1">close</span><span class="s2">()</span>

            <span class="s1">cu_drv_ver </span><span class="s2">= </span><span class="s1">cudriver</span><span class="s2">.</span><span class="s1">get_version</span><span class="s2">()</span>
            <span class="s1">cu_rt_ver </span><span class="s2">= </span><span class="s1">curuntime</span><span class="s2">.</span><span class="s1">get_version</span><span class="s2">()</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_drv_ver</span><span class="s2">] = </span><span class="s3">'%s.%s' </span><span class="s2">% </span><span class="s1">cu_drv_ver</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_rt_ver</span><span class="s2">] = </span><span class="s3">'%s.%s' </span><span class="s2">% </span><span class="s1">cu_rt_ver</span>

            <span class="s1">output </span><span class="s2">= </span><span class="s1">StringIO</span><span class="s2">()</span>
            <span class="s0">with </span><span class="s1">redirect_stdout</span><span class="s2">(</span><span class="s1">output</span><span class="s2">):</span>
                <span class="s1">cudadrv</span><span class="s2">.</span><span class="s1">libs</span><span class="s2">.</span><span class="s1">test</span><span class="s2">()</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_lib_test</span><span class="s2">] = </span><span class="s1">output</span><span class="s2">.</span><span class="s1">getvalue</span><span class="s2">()</span>
            <span class="s1">output</span><span class="s2">.</span><span class="s1">close</span><span class="s2">()</span>

            <span class="s0">try</span><span class="s2">:</span>
                <span class="s0">from </span><span class="s1">cuda </span><span class="s0">import </span><span class="s1">cuda  </span><span class="s4"># noqa: F401</span>
                <span class="s1">nvidia_bindings_available </span><span class="s2">= </span><span class="s0">True</span>
            <span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
                <span class="s1">nvidia_bindings_available </span><span class="s2">= </span><span class="s0">False</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_nvidia_bindings</span><span class="s2">] = </span><span class="s1">nvidia_bindings_available</span>

            <span class="s1">nv_binding_used </span><span class="s2">= </span><span class="s1">bool</span><span class="s2">(</span><span class="s1">cudadrv</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">USE_NV_BINDING</span><span class="s2">)</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_nvidia_bindings_used</span><span class="s2">] = </span><span class="s1">nv_binding_used</span>

            <span class="s0">try</span><span class="s2">:</span>
                <span class="s0">from </span><span class="s1">ptxcompiler </span><span class="s0">import </span><span class="s1">compile_ptx  </span><span class="s4"># noqa: F401</span>
                <span class="s0">from </span><span class="s1">cubinlinker </span><span class="s0">import </span><span class="s1">CubinLinker  </span><span class="s4"># noqa: F401</span>
                <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_mvc_available</span><span class="s2">] = </span><span class="s0">True</span>
            <span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
                <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_mvc_available</span><span class="s2">] = </span><span class="s0">False</span>

            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_mvc_needed</span><span class="s2">] = </span><span class="s1">cu_rt_ver </span><span class="s2">&gt; </span><span class="s1">cu_drv_ver</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_cu_mvc_in_use</span><span class="s2">] = </span><span class="s1">bool</span><span class="s2">(</span>
                <span class="s1">config</span><span class="s2">.</span><span class="s1">CUDA_ENABLE_MINOR_VERSION_COMPATIBILITY</span><span class="s2">)</span>
        <span class="s0">except </span><span class="s1">Exception </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
            <span class="s1">_warning_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span>
                <span class="s3">&quot;Warning (cuda): Probing CUDA failed &quot;</span>
                <span class="s3">&quot;(device and driver present, runtime problem?)</span><span class="s0">\n</span><span class="s3">&quot;</span>
                <span class="s3">f&quot;(cuda) </span><span class="s0">{</span><span class="s1">type</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)</span><span class="s0">}</span><span class="s3">: </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">)</span>

    <span class="s4"># NumPy information</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_numpy_version</span><span class="s2">] = </span><span class="s1">np</span><span class="s2">.</span><span class="s1">version</span><span class="s2">.</span><span class="s1">full_version</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s4"># NOTE: These consts were added in NumPy 1.20</span>
        <span class="s0">from </span><span class="s1">numpy</span><span class="s2">.</span><span class="s1">core</span><span class="s2">.</span><span class="s1">_multiarray_umath </span><span class="s0">import </span><span class="s2">(</span><span class="s1">__cpu_features__</span><span class="s2">,</span>
                                                  <span class="s1">__cpu_dispatch__</span><span class="s2">,</span>
                                                  <span class="s1">__cpu_baseline__</span><span class="s2">,)</span>
    <span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_numpy_AVX512_SKX_detected</span><span class="s2">] = </span><span class="s0">False</span>
    <span class="s0">else</span><span class="s2">:</span>
        <span class="s1">feat_filtered </span><span class="s2">= [</span><span class="s1">k </span><span class="s0">for </span><span class="s1">k</span><span class="s2">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">__cpu_features__</span><span class="s2">.</span><span class="s1">items</span><span class="s2">() </span><span class="s0">if </span><span class="s1">v</span><span class="s2">]</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_numpy_supported_simd_features</span><span class="s2">] = </span><span class="s1">feat_filtered</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_numpy_supported_simd_dispatch</span><span class="s2">] = </span><span class="s1">__cpu_dispatch__</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_numpy_supported_simd_baseline</span><span class="s2">] = </span><span class="s1">__cpu_baseline__</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_numpy_AVX512_SKX_detected</span><span class="s2">] = </span><span class="s1">\</span>
            <span class="s1">__cpu_features__</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">&quot;AVX512_SKX&quot;</span><span class="s2">, </span><span class="s0">False</span><span class="s2">)</span>

    <span class="s4"># SVML information</span>
    <span class="s4"># Replicate some SVML detection logic from numba.__init__ here.</span>
    <span class="s4"># If SVML load fails in numba.__init__ the splitting of the logic</span>
    <span class="s4"># here will help diagnosing the underlying issue.</span>
    <span class="s1">svml_lib_loaded </span><span class="s2">= </span><span class="s0">True</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">platform</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'linux'</span><span class="s2">):</span>
            <span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">load_library_permanently</span><span class="s2">(</span><span class="s3">&quot;libsvml.so&quot;</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">platform</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'darwin'</span><span class="s2">):</span>
            <span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">load_library_permanently</span><span class="s2">(</span><span class="s3">&quot;libsvml.dylib&quot;</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">platform</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'win'</span><span class="s2">):</span>
            <span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">load_library_permanently</span><span class="s2">(</span><span class="s3">&quot;svml_dispmd&quot;</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">svml_lib_loaded </span><span class="s2">= </span><span class="s0">False</span>
    <span class="s0">except </span><span class="s1">Exception</span><span class="s2">:</span>
        <span class="s1">svml_lib_loaded </span><span class="s2">= </span><span class="s0">False</span>
    <span class="s1">func </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">llvmbind</span><span class="s2">.</span><span class="s1">targets</span><span class="s2">, </span><span class="s3">&quot;has_svml&quot;</span><span class="s2">, </span><span class="s0">None</span><span class="s2">)</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_llvm_svml_patched</span><span class="s2">] = </span><span class="s1">func</span><span class="s2">() </span><span class="s0">if </span><span class="s1">func </span><span class="s0">else False</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_svml_state</span><span class="s2">] = </span><span class="s1">config</span><span class="s2">.</span><span class="s1">USING_SVML</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_svml_loaded</span><span class="s2">] = </span><span class="s1">svml_lib_loaded</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_svml_operational</span><span class="s2">] = </span><span class="s1">all</span><span class="s2">((</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_svml_state</span><span class="s2">],</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_svml_loaded</span><span class="s2">],</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_llvm_svml_patched</span><span class="s2">],</span>
    <span class="s2">))</span>

    <span class="s4"># Check which threading backends are available.</span>
    <span class="s0">def </span><span class="s1">parse_error</span><span class="s2">(</span><span class="s1">e</span><span class="s2">, </span><span class="s1">backend</span><span class="s2">):</span>
        <span class="s4"># parses a linux based error message, this is to provide feedback</span>
        <span class="s4"># and hide user paths etc</span>
        <span class="s0">try</span><span class="s2">:</span>
            <span class="s1">path</span><span class="s2">, </span><span class="s1">problem</span><span class="s2">, </span><span class="s1">symbol </span><span class="s2">= [</span><span class="s1">x</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">() </span><span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">e</span><span class="s2">.</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s3">':'</span><span class="s2">)]</span>
            <span class="s1">extn_dso </span><span class="s2">= </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s1">path</span><span class="s2">)[</span><span class="s5">1</span><span class="s2">]</span>
            <span class="s0">if </span><span class="s1">backend </span><span class="s0">in </span><span class="s1">extn_dso</span><span class="s2">:</span>
                <span class="s0">return </span><span class="s3">&quot;%s: %s&quot; </span><span class="s2">% (</span><span class="s1">problem</span><span class="s2">, </span><span class="s1">symbol</span><span class="s2">)</span>
        <span class="s0">except </span><span class="s1">Exception</span><span class="s2">:</span>
            <span class="s0">pass</span>
        <span class="s0">return </span><span class="s3">&quot;Unknown import problem.&quot;</span>

    <span class="s0">try</span><span class="s2">:</span>
        <span class="s4"># check import is ok, this means the DSO linkage is working</span>
        <span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">np</span><span class="s2">.</span><span class="s1">ufunc </span><span class="s0">import </span><span class="s1">tbbpool  </span><span class="s4"># NOQA</span>
        <span class="s4"># check that the version is compatible, this is a check performed at</span>
        <span class="s4"># runtime (well, compile time), it will also ImportError if there's</span>
        <span class="s4"># a problem.</span>
        <span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">np</span><span class="s2">.</span><span class="s1">ufunc</span><span class="s2">.</span><span class="s1">parallel </span><span class="s0">import </span><span class="s1">_check_tbb_version_compatible</span>
        <span class="s1">_check_tbb_version_compatible</span><span class="s2">()</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_tbb_thread</span><span class="s2">] = </span><span class="s0">True</span>
    <span class="s0">except </span><span class="s1">ImportError </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s4"># might be a missing symbol due to e.g. tbb libraries missing</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_tbb_thread</span><span class="s2">] = </span><span class="s0">False</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_tbb_error</span><span class="s2">] = </span><span class="s1">parse_error</span><span class="s2">(</span><span class="s1">e</span><span class="s2">, </span><span class="s3">'tbbpool'</span><span class="s2">)</span>

    <span class="s0">try</span><span class="s2">:</span>
        <span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">np</span><span class="s2">.</span><span class="s1">ufunc </span><span class="s0">import </span><span class="s1">omppool</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_openmp_thread</span><span class="s2">] = </span><span class="s0">True</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_openmp_vendor</span><span class="s2">] = </span><span class="s1">omppool</span><span class="s2">.</span><span class="s1">openmp_vendor</span>
    <span class="s0">except </span><span class="s1">ImportError </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_openmp_thread</span><span class="s2">] = </span><span class="s0">False</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_openmp_error</span><span class="s2">] = </span><span class="s1">parse_error</span><span class="s2">(</span><span class="s1">e</span><span class="s2">, </span><span class="s3">'omppool'</span><span class="s2">)</span>

    <span class="s0">try</span><span class="s2">:</span>
        <span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">np</span><span class="s2">.</span><span class="s1">ufunc </span><span class="s0">import </span><span class="s1">workqueue  </span><span class="s4"># NOQA</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_wkq_thread</span><span class="s2">] = </span><span class="s0">True</span>
    <span class="s0">except </span><span class="s1">ImportError </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_wkq_thread</span><span class="s2">] = </span><span class="s0">True</span>
        <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_wkq_error</span><span class="s2">] = </span><span class="s1">parse_error</span><span class="s2">(</span><span class="s1">e</span><span class="s2">, </span><span class="s3">'workqueue'</span><span class="s2">)</span>

    <span class="s4"># Look for conda and installed packages information</span>
    <span class="s1">cmd </span><span class="s2">= (</span><span class="s3">'conda'</span><span class="s2">, </span><span class="s3">'info'</span><span class="s2">, </span><span class="s3">'--json'</span><span class="s2">)</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s1">conda_out </span><span class="s2">= </span><span class="s1">check_output</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">)</span>
    <span class="s0">except </span><span class="s1">Exception </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
        <span class="s1">_warning_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Warning: Conda not available.</span><span class="s0">\n </span><span class="s3">Error was </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}\n</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s4"># Conda is not available, try pip list to list installed packages</span>
        <span class="s1">cmd </span><span class="s2">= (</span><span class="s1">sys</span><span class="s2">.</span><span class="s1">executable</span><span class="s2">, </span><span class="s3">'-m'</span><span class="s2">, </span><span class="s3">'pip'</span><span class="s2">, </span><span class="s3">'list'</span><span class="s2">)</span>
        <span class="s0">try</span><span class="s2">:</span>
            <span class="s1">reqs </span><span class="s2">= </span><span class="s1">check_output</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">)</span>
        <span class="s0">except </span><span class="s1">Exception </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
            <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (pip): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_inst_pkg</span><span class="s2">] = </span><span class="s1">reqs</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">().</span><span class="s1">splitlines</span><span class="s2">()</span>

    <span class="s0">else</span><span class="s2">:</span>
        <span class="s1">jsond </span><span class="s2">= </span><span class="s1">json</span><span class="s2">.</span><span class="s1">loads</span><span class="s2">(</span><span class="s1">conda_out</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">())</span>
        <span class="s1">keys </span><span class="s2">= {</span>
            <span class="s3">'conda_build_version'</span><span class="s2">: </span><span class="s1">_conda_build_ver</span><span class="s2">,</span>
            <span class="s3">'conda_env_version'</span><span class="s2">: </span><span class="s1">_conda_env_ver</span><span class="s2">,</span>
            <span class="s3">'platform'</span><span class="s2">: </span><span class="s1">_conda_platform</span><span class="s2">,</span>
            <span class="s3">'python_version'</span><span class="s2">: </span><span class="s1">_conda_python_ver</span><span class="s2">,</span>
            <span class="s3">'root_writable'</span><span class="s2">: </span><span class="s1">_conda_root_writable</span><span class="s2">,</span>
        <span class="s2">}</span>
        <span class="s0">for </span><span class="s1">conda_k</span><span class="s2">, </span><span class="s1">sysinfo_k </span><span class="s0">in </span><span class="s1">keys</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">sysinfo_k</span><span class="s2">] = </span><span class="s1">jsond</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">conda_k</span><span class="s2">, </span><span class="s3">'N/A'</span><span class="s2">)</span>

        <span class="s4"># Get info about packages in current environment</span>
        <span class="s1">cmd </span><span class="s2">= (</span><span class="s3">'conda'</span><span class="s2">, </span><span class="s3">'list'</span><span class="s2">)</span>
        <span class="s0">try</span><span class="s2">:</span>
            <span class="s1">conda_out </span><span class="s2">= </span><span class="s1">check_output</span><span class="s2">(</span><span class="s1">cmd</span><span class="s2">)</span>
        <span class="s0">except </span><span class="s1">CalledProcessError </span><span class="s0">as </span><span class="s1">e</span><span class="s2">:</span>
            <span class="s1">_error_log</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s3">f'Error (conda): </span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">data </span><span class="s2">= </span><span class="s1">conda_out</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">().</span><span class="s1">splitlines</span><span class="s2">()</span>
            <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_inst_pkg</span><span class="s2">] = [</span><span class="s1">l </span><span class="s0">for </span><span class="s1">l </span><span class="s0">in </span><span class="s1">data </span><span class="s0">if not </span><span class="s1">l</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'#'</span><span class="s2">)]</span>

    <span class="s1">sys_info</span><span class="s2">.</span><span class="s1">update</span><span class="s2">(</span><span class="s1">get_os_spec_info</span><span class="s2">(</span><span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_os_name</span><span class="s2">]))</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_errors</span><span class="s2">] = </span><span class="s1">_error_log</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_warnings</span><span class="s2">] = </span><span class="s1">_warning_log</span>
    <span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_runtime</span><span class="s2">] = (</span><span class="s1">datetime</span><span class="s2">.</span><span class="s1">now</span><span class="s2">() - </span><span class="s1">sys_info</span><span class="s2">[</span><span class="s1">_start</span><span class="s2">]).</span><span class="s1">total_seconds</span><span class="s2">()</span>
    <span class="s0">return </span><span class="s1">sys_info</span>


<span class="s0">def </span><span class="s1">display_sysinfo</span><span class="s2">(</span><span class="s1">info</span><span class="s2">=</span><span class="s0">None</span><span class="s2">, </span><span class="s1">sep_pos</span><span class="s2">=</span><span class="s5">45</span><span class="s2">):</span>
    <span class="s0">class </span><span class="s1">DisplayMap</span><span class="s2">(</span><span class="s1">dict</span><span class="s2">):</span>
        <span class="s1">display_map_flag </span><span class="s2">= </span><span class="s0">True</span>

    <span class="s0">class </span><span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">tuple</span><span class="s2">):</span>
        <span class="s1">display_seq_flag </span><span class="s2">= </span><span class="s0">True</span>

    <span class="s0">class </span><span class="s1">DisplaySeqMaps</span><span class="s2">(</span><span class="s1">tuple</span><span class="s2">):</span>
        <span class="s1">display_seqmaps_flag </span><span class="s2">= </span><span class="s0">True</span>

    <span class="s0">if </span><span class="s1">info </span><span class="s0">is None</span><span class="s2">:</span>
        <span class="s1">info </span><span class="s2">= </span><span class="s1">get_sysinfo</span><span class="s2">()</span>

    <span class="s1">fmt </span><span class="s2">= </span><span class="s3">f'%-</span><span class="s0">{</span><span class="s1">sep_pos</span><span class="s0">}</span><span class="s3">s : %-s'</span>
    <span class="s1">MB </span><span class="s2">= </span><span class="s5">1024</span><span class="s2">**</span><span class="s5">2</span>
    <span class="s1">template </span><span class="s2">= (</span>
        <span class="s2">(</span><span class="s3">&quot;-&quot; </span><span class="s2">* </span><span class="s5">80</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Time Stamp__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;Report started (local time)&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_start</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;UTC start time&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_start_utc</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;Running time (s)&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_runtime</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Hardware Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;Machine&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_machine</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CPU Name&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpu_name</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CPU Count&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpu_count</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;Number of accessible CPUs&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpus_allowed</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;List of accessible CPUs cores&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpus_list</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CFS Restrictions (CPUs worth of runtime)&quot;</span><span class="s2">,</span>
            <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cfs_restrict</span><span class="s2">, </span><span class="s3">'None'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;CPU Features&quot;</span><span class="s2">, </span><span class="s3">'</span><span class="s0">\n</span><span class="s3">'</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span>
            <span class="s3">' ' </span><span class="s2">* (</span><span class="s1">sep_pos </span><span class="s2">+ </span><span class="s5">3</span><span class="s2">) + </span><span class="s1">l </span><span class="s0">if </span><span class="s1">i </span><span class="s0">else </span><span class="s1">l</span>
            <span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">l </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span>
                <span class="s1">textwrap</span><span class="s2">.</span><span class="s1">wrap</span><span class="s2">(</span>
                    <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cpu_features</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">),</span>
                    <span class="s1">width</span><span class="s2">=</span><span class="s5">79 </span><span class="s2">- </span><span class="s1">sep_pos</span>
                <span class="s2">)</span>
            <span class="s2">)</span>
        <span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;Memory Total (MB)&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_mem_total</span><span class="s2">, </span><span class="s5">0</span><span class="s2">) // </span><span class="s1">MB </span><span class="s0">or </span><span class="s3">'?'</span><span class="s2">),</span>
        <span class="s2">(</span><span class="s3">&quot;Memory Available (MB)&quot;</span>
            <span class="s0">if </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_os_name</span><span class="s2">, </span><span class="s3">''</span><span class="s2">) != </span><span class="s3">'Darwin' </span><span class="s0">or </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_psutil</span><span class="s2">, </span><span class="s0">False</span><span class="s2">)</span>
            <span class="s0">else </span><span class="s3">&quot;Free Memory (MB)&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_mem_available</span><span class="s2">, </span><span class="s5">0</span><span class="s2">) // </span><span class="s1">MB </span><span class="s0">or </span><span class="s3">'?'</span><span class="s2">),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__OS Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;Platform Name&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_platform_name</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;Platform Release&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_platform_release</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;OS Name&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_os_name</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;OS Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_os_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;OS Specific Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_os_spec_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;Libc Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_libc_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Python Information__&quot;</span><span class="s2">,),</span>
        <span class="s1">DisplayMap</span><span class="s2">({</span><span class="s1">k</span><span class="s2">: </span><span class="s1">v </span><span class="s0">for </span><span class="s1">k</span><span class="s2">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">info</span><span class="s2">.</span><span class="s1">items</span><span class="s2">() </span><span class="s0">if </span><span class="s1">k</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'Python'</span><span class="s2">)}),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Numba Toolchain Versions__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;Numba Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numba_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;llvmlite Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_llvmlite_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__LLVM Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;LLVM Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_llvm_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__CUDA Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Device Initialized&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_dev_init</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Driver Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_drv_ver</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Runtime Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_rt_ver</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA NVIDIA Bindings Available&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_nvidia_bindings</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA NVIDIA Bindings In Use&quot;</span><span class="s2">,</span>
         <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_nvidia_bindings_used</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Minor Version Compatibility Available&quot;</span><span class="s2">,</span>
         <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_mvc_available</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Minor Version Compatibility Needed&quot;</span><span class="s2">,</span>
         <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_mvc_needed</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Minor Version Compatibility In Use&quot;</span><span class="s2">,</span>
         <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_mvc_in_use</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Detect Output:&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_detect_out</span><span class="s2">, </span><span class="s3">&quot;None&quot;</span><span class="s2">),),</span>
        <span class="s2">(</span><span class="s3">&quot;CUDA Libraries Test Output:&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_cu_lib_test</span><span class="s2">, </span><span class="s3">&quot;None&quot;</span><span class="s2">),),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__NumPy Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;NumPy Version&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numpy_version</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;NumPy Supported SIMD features&quot;</span><span class="s2">,</span>
         <span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numpy_supported_simd_features</span><span class="s2">, [])</span>
                    <span class="s0">or </span><span class="s2">(</span><span class="s3">'None found.'</span><span class="s2">,))),</span>
        <span class="s2">(</span><span class="s3">&quot;NumPy Supported SIMD dispatch&quot;</span><span class="s2">,</span>
         <span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numpy_supported_simd_dispatch</span><span class="s2">, [])</span>
                    <span class="s0">or </span><span class="s2">(</span><span class="s3">'None found.'</span><span class="s2">,))),</span>
        <span class="s2">(</span><span class="s3">&quot;NumPy Supported SIMD baseline&quot;</span><span class="s2">,</span>
         <span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numpy_supported_simd_baseline</span><span class="s2">, [])</span>
                    <span class="s0">or </span><span class="s2">(</span><span class="s3">'None found.'</span><span class="s2">,))),</span>
        <span class="s2">(</span><span class="s3">&quot;NumPy AVX512_SKX support detected&quot;</span><span class="s2">,</span>
         <span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numpy_AVX512_SKX_detected</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__SVML Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;SVML State, config.USING_SVML&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_svml_state</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;SVML Library Loaded&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_svml_loaded</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;llvmlite Using SVML Patched LLVM&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_llvm_svml_patched</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;SVML Operational&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_svml_operational</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Threading Layer Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;TBB Threading Layer Available&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_tbb_thread</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;+--&gt;TBB imported successfully.&quot; </span><span class="s0">if </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_tbb_thread</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)</span>
            <span class="s0">else </span><span class="s3">f&quot;+--&gt; Disabled due to </span><span class="s0">{</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_tbb_error</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;OpenMP Threading Layer Available&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_openmp_thread</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">f&quot;+--&gt;Vendor: </span><span class="s0">{</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_openmp_vendor</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)</span><span class="s0">}</span><span class="s3">&quot;</span>
            <span class="s0">if </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_openmp_thread</span><span class="s2">, </span><span class="s0">False</span><span class="s2">)</span>
            <span class="s0">else </span><span class="s3">f&quot;+--&gt; Disabled due to </span><span class="s0">{</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_openmp_error</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;Workqueue Threading Layer Available&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_wkq_thread</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)),</span>
        <span class="s2">(</span><span class="s3">&quot;+--&gt;Workqueue imported successfully.&quot; </span><span class="s0">if </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_wkq_thread</span><span class="s2">, </span><span class="s0">False</span><span class="s2">)</span>
            <span class="s0">else </span><span class="s3">f&quot;+--&gt; Disabled due to </span><span class="s0">{</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_wkq_error</span><span class="s2">, </span><span class="s3">'?'</span><span class="s2">)</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Numba Environment Variable Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s1">DisplayMap</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_numba_env_vars</span><span class="s2">, {})) </span><span class="s0">or </span><span class="s2">(</span><span class="s3">'None found.'</span><span class="s2">,)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Conda Information__&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s1">DisplayMap</span><span class="s2">({</span><span class="s1">k</span><span class="s2">: </span><span class="s1">v </span><span class="s0">for </span><span class="s1">k</span><span class="s2">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">info</span><span class="s2">.</span><span class="s1">items</span><span class="s2">()</span>
                     <span class="s0">if </span><span class="s1">k</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'Conda'</span><span class="s2">)}) </span><span class="s0">or </span><span class="s2">(</span><span class="s3">&quot;Conda not available.&quot;</span><span class="s2">,)),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Installed Packages__&quot;</span><span class="s2">,),</span>
        <span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_inst_pkg</span><span class="s2">, (</span><span class="s3">&quot;Couldn't retrieve packages info.&quot;</span><span class="s2">,))),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Error log__&quot; </span><span class="s0">if </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_errors</span><span class="s2">, [])</span>
            <span class="s0">else </span><span class="s3">&quot;No errors reported.&quot;</span><span class="s2">,),</span>
        <span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_errors</span><span class="s2">, [])),</span>
        <span class="s2">(</span><span class="s3">&quot;&quot;</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;__Warning log__&quot; </span><span class="s0">if </span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_warnings</span><span class="s2">, [])</span>
            <span class="s0">else </span><span class="s3">&quot;No warnings reported.&quot;</span><span class="s2">,),</span>
        <span class="s1">DisplaySeq</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">_warnings</span><span class="s2">, [])),</span>
        <span class="s2">(</span><span class="s3">&quot;-&quot; </span><span class="s2">* </span><span class="s5">80</span><span class="s2">,),</span>
        <span class="s2">(</span><span class="s3">&quot;If requested, please copy and paste the information between</span><span class="s0">\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;the dashed (----) lines, or from a given specific section as</span><span class="s0">\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;appropriate.</span><span class="s0">\n\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;=============================================================</span><span class="s0">\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;IMPORTANT: Please ensure that you are happy with sharing the</span><span class="s0">\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;contents of the information present, any information that you</span><span class="s0">\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;wish to keep private you should remove before sharing.</span><span class="s0">\n</span><span class="s3">&quot;</span>
         <span class="s3">&quot;=============================================================</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s2">,),</span>
    <span class="s2">)</span>
    <span class="s0">for </span><span class="s1">t </span><span class="s0">in </span><span class="s1">template</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">, </span><span class="s3">'display_seq_flag'</span><span class="s2">):</span>
            <span class="s1">print</span><span class="s2">(*</span><span class="s1">t</span><span class="s2">, </span><span class="s1">sep</span><span class="s2">=</span><span class="s3">'</span><span class="s0">\n</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">, </span><span class="s3">'display_map_flag'</span><span class="s2">):</span>
            <span class="s1">print</span><span class="s2">(*</span><span class="s1">tuple</span><span class="s2">(</span><span class="s1">fmt </span><span class="s2">% (</span><span class="s1">k</span><span class="s2">, </span><span class="s1">v</span><span class="s2">) </span><span class="s0">for </span><span class="s2">(</span><span class="s1">k</span><span class="s2">, </span><span class="s1">v</span><span class="s2">) </span><span class="s0">in </span><span class="s1">t</span><span class="s2">.</span><span class="s1">items</span><span class="s2">()), </span><span class="s1">sep</span><span class="s2">=</span><span class="s3">'</span><span class="s0">\n</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">, </span><span class="s3">'display_seqmaps_flag'</span><span class="s2">):</span>
            <span class="s0">for </span><span class="s1">d </span><span class="s0">in </span><span class="s1">t</span><span class="s2">:</span>
                <span class="s1">print</span><span class="s2">(*</span><span class="s1">tuple</span><span class="s2">(</span><span class="s1">fmt </span><span class="s2">% (</span><span class="s3">'</span><span class="s0">\t</span><span class="s3">' </span><span class="s2">+ </span><span class="s1">k</span><span class="s2">, </span><span class="s1">v</span><span class="s2">) </span><span class="s0">for </span><span class="s2">(</span><span class="s1">k</span><span class="s2">, </span><span class="s1">v</span><span class="s2">) </span><span class="s0">in </span><span class="s1">d</span><span class="s2">.</span><span class="s1">items</span><span class="s2">()),</span>
                      <span class="s1">sep</span><span class="s2">=</span><span class="s3">'</span><span class="s0">\n</span><span class="s3">'</span><span class="s2">, </span><span class="s1">end</span><span class="s2">=</span><span class="s3">'</span><span class="s0">\n</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">len</span><span class="s2">(</span><span class="s1">t</span><span class="s2">) == </span><span class="s5">2</span><span class="s2">:</span>
            <span class="s1">print</span><span class="s2">(</span><span class="s1">fmt </span><span class="s2">% </span><span class="s1">t</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">print</span><span class="s2">(*</span><span class="s1">t</span><span class="s2">)</span>


<span class="s0">if </span><span class="s1">__name__ </span><span class="s2">== </span><span class="s3">'__main__'</span><span class="s2">:</span>
    <span class="s1">display_sysinfo</span><span class="s2">()</span>
</pre>
</body>
</html>