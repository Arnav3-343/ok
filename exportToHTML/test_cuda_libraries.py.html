<html>
<head>
<title>test_cuda_libraries.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
test_cuda_libraries.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">cuda</span><span class="s2">.</span><span class="s1">testing </span><span class="s0">import </span><span class="s1">unittest</span>
<span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">cuda</span><span class="s2">.</span><span class="s1">testing </span><span class="s0">import </span><span class="s1">skip_on_cudasim</span><span class="s2">, </span><span class="s1">skip_unless_conda_cudatoolkit</span>
<span class="s0">from </span><span class="s1">numba</span><span class="s2">.</span><span class="s1">misc</span><span class="s2">.</span><span class="s1">findlib </span><span class="s0">import </span><span class="s1">find_lib</span>


<span class="s2">@</span><span class="s1">skip_on_cudasim</span><span class="s2">(</span><span class="s3">'Library detection unsupported in the simulator'</span><span class="s2">)</span>
<span class="s2">@</span><span class="s1">skip_unless_conda_cudatoolkit</span>
<span class="s0">class </span><span class="s1">TestLibraryDetection</span><span class="s2">(</span><span class="s1">unittest</span><span class="s2">.</span><span class="s1">TestCase</span><span class="s2">):</span>
    <span class="s0">def </span><span class="s1">test_detect</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">&quot;&quot;&quot; 
        This test is solely present to ensure that shipped cudatoolkits have 
        additional core libraries in locations that Numba scans by default. 
        PyCulib (and potentially others) rely on Numba's library finding 
        capacity to find and subsequently load these libraries. 
        &quot;&quot;&quot;</span>
        <span class="s1">core_libs </span><span class="s2">= [</span><span class="s3">'nvvm'</span><span class="s2">]</span>
        <span class="s0">for </span><span class="s1">l </span><span class="s0">in </span><span class="s1">core_libs</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">assertNotEqual</span><span class="s2">(</span><span class="s1">find_lib</span><span class="s2">(</span><span class="s1">l</span><span class="s2">), [])</span>


<span class="s0">if </span><span class="s1">__name__ </span><span class="s2">== </span><span class="s3">'__main__'</span><span class="s2">:</span>
    <span class="s1">unittest</span><span class="s2">.</span><span class="s1">main</span><span class="s2">()</span>
</pre>
</body>
</html>