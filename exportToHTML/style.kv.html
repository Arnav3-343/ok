<html>
<head>
<title>style.kv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
style.kv</font>
</center></td></tr></table>
<pre><span class="s0">#:kivy 1.0</span>

<span class="s0">&lt;Label&gt;:</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 1, 1, 1, 1</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">texture: self.texture</span>
            <span class="s0">size: self.texture_size</span>
            <span class="s0">pos: int(self.center_x - self.texture_size[0] / 2.), int(self.center_y - self.texture_size[1] / 2.)</span>

<span class="s0">&lt;-Button,-ToggleButton&gt;:</span>
    <span class="s0">state_image: self.background_normal if self.state == 'normal' else self.background_down</span>
    <span class="s0">disabled_image: self.background_disabled_normal if self.state == 'normal' else self.background_disabled_down</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.background_color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: self.border</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
            <span class="s0">source: self.disabled_image if self.disabled else self.state_image</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 1, 1, 1, 1</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">texture: self.texture</span>
            <span class="s0">size: self.texture_size</span>
            <span class="s0">pos: int(self.center_x - self.texture_size[0] / 2.), int(self.center_y - self.texture_size[1] / 2.)</span>

<span class="s0">&lt;BubbleContent&gt;</span>
    <span class="s0">opacity: .7 if self.disabled else 1</span>
    <span class="s0">orientation: &quot;horizontal&quot;</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.background_color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: self.border</span>
            <span class="s0">source: self.background_image</span>
            <span class="s0">size: self.size</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">auto_scale: self.border_auto_scale</span>

<span class="s0">&lt;BubbleButton&gt;:</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/bubble_btn'</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/bubble_btn_pressed'</span>
    <span class="s0">background_disabled_normal: 'atlas://data/images/defaulttheme/bubble_btn'</span>
    <span class="s0">background_disabled_down: 'atlas://data/images/defaulttheme/bubble_btn_pressed'</span>
    <span class="s0">border: (0, 0, 0, 0)</span>

<span class="s0">&lt;Slider&gt;:</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 1, 1, 1</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: self.border_horizontal if self.orientation == 'horizontal' else self.border_vertical</span>
            <span class="s0">pos: (self.x + self.padding, self.center_y - self.background_width / 2) if self.orientation == 'horizontal' else (self.center_x - self.background_width / 2, self.y + self.padding)</span>
            <span class="s0">size: (self.width - self.padding * 2, self.background_width) if self.orientation == 'horizontal' else (self.background_width, self.height - self.padding * 2)</span>
            <span class="s0">source: (self.background_disabled_horizontal if self.orientation == 'horizontal' else self.background_disabled_vertical) if self.disabled else (self.background_horizontal if self.orientation == 'horizontal' else self.background_vertical)</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: root.value_track_color if self.value_track and self.orientation == 'horizontal' else [1, 1, 1, 0]</span>
        <span class="s0">Line:</span>
            <span class="s0">width: self.value_track_width</span>
            <span class="s0">points: self.x + self.padding, self.center_y, self.value_pos[0], self.center_y</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: root.value_track_color if self.value_track and self.orientation == 'vertical' else [1, 1, 1, 0]</span>
        <span class="s0">Line:</span>
            <span class="s0">width: self.value_track_width</span>
            <span class="s0">points: self.center_x, self.y + self.padding, self.center_x, self.value_pos[1]</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 1, 1, 1</span>
    <span class="s0">Image:</span>
        <span class="s0">pos: (root.value_pos[0] - root.cursor_width / 2, root.center_y - root.cursor_height / 2) if root.orientation == 'horizontal' else (root.center_x - root.cursor_width / 2, root.value_pos[1] - root.cursor_height / 2)</span>
        <span class="s0">size: root.cursor_size</span>
        <span class="s0">source: root.cursor_disabled_image if root.disabled else root.cursor_image</span>
        <span class="s0">fit_mode: &quot;fill&quot;</span>

<span class="s0">&lt;ProgressBar&gt;:</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 1, 1, 1</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: (12, 12, 12, 12)</span>
            <span class="s0">pos: self.x, self.center_y - 12</span>
            <span class="s0">size: self.width, 24</span>
            <span class="s0">source: 'atlas://data/images/defaulttheme/progressbar_background'</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: [int(min(self.width * (self.value / float(self.max)) if self.max else 0, 12))] * 4</span>
            <span class="s0">pos: self.x, self.center_y - 12</span>
            <span class="s0">size: self.width * (self.value / float(self.max)) if self.max else 0, 24</span>
            <span class="s0">source: 'atlas://data/images/defaulttheme/progressbar'</span>

<span class="s0">&lt;SplitterStrip&gt;:</span>
    <span class="s0">border: self.parent.border if self.parent else (3, 3, 3, 3)</span>
    <span class="s0">horizontal: '_h' if self.parent and self.parent.sizable_from[0] in  ('t', 'b') else ''</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/splitter{}{}'.format('_disabled' if self.disabled else '', self.horizontal)</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/splitter_down{}{}'.format('_disabled' if self.disabled else '', self.horizontal)</span>
    <span class="s0">Image:</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size: root.size</span>
        <span class="s0">fit_mode: &quot;contain&quot;</span>
        <span class="s0">source: 'atlas://data/images/defaulttheme/splitter_grip' + root.horizontal</span>

<span class="s0">&lt;Scatter&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">PushMatrix</span>
        <span class="s0">MatrixInstruction:</span>
            <span class="s0">matrix: self.transform</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">PopMatrix</span>


<span class="s0">&lt;RelativeLayout&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">PushMatrix</span>
        <span class="s0">Translate:</span>
            <span class="s0">xy: self.pos</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">PopMatrix</span>

<span class="s0">&lt;Image,AsyncImage&gt;:</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.color</span>
        <span class="s0">StencilPush</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">StencilUse</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">texture: self.texture</span>
            <span class="s0">size: self.norm_image_size</span>
            <span class="s0">pos: self.center_x - self.norm_image_size[0] / 2., self.center_y - self.norm_image_size[1] / 2.</span>
        <span class="s0">StencilUnUse</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">StencilPop</span>

<span class="s0">&lt;EffectWidget&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Translate:</span>
            <span class="s0">xy: -self.x, -self.y</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 1, 1, 1, 1</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">texture: self.texture</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>

<span class="s0">&lt;TabbedPanelContent&gt;</span>
    <span class="s0">rows: 1</span>
    <span class="s0">padding: 3</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.parent.background_color if self.parent else (1, 1, 1, 1)</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: self.parent.border if self.parent else (16, 16, 16, 16)</span>
            <span class="s0">source: (root.parent.background_disabled_image if self.disabled else root.parent.background_image) if root.parent else None</span>
            <span class="s0">size: self.size</span>
            <span class="s0">pos: self.pos</span>

<span class="s0">&lt;TabbedPanelStrip&gt;</span>
    <span class="s0">rows: 1</span>

<span class="s0">&lt;StripLayout&gt;</span>
    <span class="s0">padding: '2dp', '2dp', '2dp', '2dp'</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
            <span class="s0">border: root.border</span>
            <span class="s0">source: root.background_image</span>

<span class="s0">&lt;TabbedPanelHeader&gt;:</span>
    <span class="s0">halign: 'center'</span>
    <span class="s0">valign: 'middle'</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/tab_btn'</span>
    <span class="s0">background_disabled_normal: 'atlas://data/images/defaulttheme/tab_btn_disabled'</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/tab_btn_pressed'</span>
    <span class="s0">background_disabled_down: 'atlas://data/images/defaulttheme/tab_btn_pressed'</span>
    <span class="s0">border: (8, 8, 8, 8)</span>
    <span class="s0">font_size: '15sp'</span>

<span class="s0">&lt;Selector&gt;</span>
    <span class="s0">color: 148. / 255, 208 / 255., 230 / 255., 1</span>
    <span class="s0">fit_mode: &quot;contain&quot;</span>

<span class="s0">&lt;TextInput&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.background_color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: self.border</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
            <span class="s0">source: self.background_active if self.focus else (self.background_disabled_normal if self.disabled else self.background_normal)</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba:</span>
                <span class="s0">(self.cursor_color</span>
                <span class="s0">if self.focus and not self._cursor_blink</span>
                <span class="s0">and int(self.x + self.padding[0]) &lt;= self._cursor_visual_pos[0] &lt;= int(self.x + self.width - self.padding[2])</span>
                <span class="s0">else (0, 0, 0, 0))</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self._cursor_visual_pos</span>
            <span class="s0">size: root.cursor_width, -self._cursor_visual_height</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.disabled_foreground_color if self.disabled else (self.hint_text_color if not self.text else self.foreground_color)</span>

<span class="s0">&lt;TextInputCutCopyPaste&gt;:</span>
    <span class="s0">content: content.__self__</span>
    <span class="s0">but_cut: cut.__self__</span>
    <span class="s0">but_copy: copy.__self__</span>
    <span class="s0">but_paste: paste.__self__</span>
    <span class="s0">but_selectall: selectall.__self__</span>

    <span class="s0">size_hint: None, None</span>
    <span class="s0">size: '150sp', '50sp'</span>
    <span class="s0">BubbleContent:</span>
        <span class="s0">id: content</span>
        <span class="s0">BubbleButton:</span>
            <span class="s0">id: cut</span>
            <span class="s0">text: 'Cut'</span>
            <span class="s0">on_release: root.do('cut')</span>
        <span class="s0">BubbleButton:</span>
            <span class="s0">id: copy</span>
            <span class="s0">text: 'Copy'</span>
            <span class="s0">on_release: root.do('copy')</span>
        <span class="s0">BubbleButton:</span>
            <span class="s0">id: paste</span>
            <span class="s0">text: 'Paste'</span>
            <span class="s0">on_release: root.do('paste')</span>
        <span class="s0">BubbleButton:</span>
            <span class="s0">id: selectall</span>
            <span class="s0">text: 'Select All'</span>
            <span class="s0">on_release: root.do('selectall')</span>

<span class="s0">&lt;CodeInput&gt;:</span>
    <span class="s0">font_name: 'data/fonts/RobotoMono-Regular.ttf'</span>


<span class="s0">&lt;TreeViewNode&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.color_selected if self.is_selected else self.odd_color if self.odd else self.even_color</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: [self.parent.x, self.y] if self.parent else [0, 0]</span>
            <span class="s0">size: [self.parent.width, self.height] if self.parent else [1, 1]</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 1, 1, 1, int(not self.is_leaf)</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">source: 'atlas://data/images/defaulttheme/tree_%s' % ('opened' if self.is_open else 'closed')</span>
            <span class="s0">size: self.height / (3. if dp(1) &gt; 1 else 2.), self.height / (3. if dp(1) &gt; 1 else 2.)</span>
            <span class="s0">pos: self.x - dp(20), int(self.center_y - (self.height / (3. if dp(1) &gt; 1 else 2.)) * .5)</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: .5, .5, .5, .2</span>
        <span class="s0">Line:</span>
            <span class="s0">points: [self.parent.x, self.y, self.parent.right, self.y] if self.parent else []</span>


<span class="s0">&lt;TreeViewLabel&gt;:</span>
    <span class="s0">width: self.texture_size[0]</span>
    <span class="s0">height: max(self.texture_size[1] + dp(10), dp(24))</span>
    <span class="s0">text_size: self.width, None</span>


<span class="s0">&lt;StencilView&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">StencilPush</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">StencilUse</span>

    <span class="s0">canvas.after:</span>
        <span class="s0">StencilUnUse</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">StencilPop</span>


<span class="s0">&lt;FileChooserListLayout&gt;:</span>
    <span class="s0">on_entry_added: treeview.add_node(args[1])</span>
    <span class="s0">on_entries_cleared: treeview.root.nodes = []</span>
    <span class="s0">on_subentry_to_entry: not args[2].locked and treeview.add_node(args[1], args[2])</span>
    <span class="s0">on_remove_subentry: args[2].nodes = []</span>
    <span class="s0">BoxLayout:</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size: root.size</span>
        <span class="s0">size_hint: None, None</span>
        <span class="s0">orientation: 'vertical'</span>
        <span class="s0">BoxLayout:</span>
            <span class="s0">size_hint_y: None</span>
            <span class="s0">height: '30dp'</span>
            <span class="s0">orientation: 'horizontal'</span>
            <span class="s0">Widget:</span>
                <span class="s0"># Just for spacing</span>
                <span class="s0">width: '10dp'</span>
                <span class="s0">size_hint_x: None</span>
            <span class="s0">Label:</span>
                <span class="s0">text: 'Name'</span>
                <span class="s0">text_size: self.size</span>
                <span class="s0">halign: 'left'</span>
                <span class="s0">bold: True</span>
            <span class="s0">Label:</span>
                <span class="s0">text: 'Size'</span>
                <span class="s0">text_size: self.size</span>
                <span class="s0">size_hint_x: None</span>
                <span class="s0">halign: 'right'</span>
                <span class="s0">bold: True</span>
            <span class="s0">Widget:</span>
                <span class="s0"># Just for spacing</span>
                <span class="s0">width: '10dp'</span>
                <span class="s0">size_hint_x: None</span>
        <span class="s0">ScrollView:</span>
            <span class="s0">id: scrollview</span>
            <span class="s0">do_scroll_x: False</span>
            <span class="s0">Scatter:</span>
                <span class="s0">do_rotation: False</span>
                <span class="s0">do_scale: False</span>
                <span class="s0">do_translation: False</span>
                <span class="s0">size: treeview.size</span>
                <span class="s0">size_hint_y: None</span>
                <span class="s0">TreeView:</span>
                    <span class="s0">id: treeview</span>
                    <span class="s0">hide_root: True</span>
                    <span class="s0">size_hint_y: None</span>
                    <span class="s0">width: scrollview.width</span>
                    <span class="s0">height: self.minimum_height</span>
                    <span class="s0">on_node_expand: root.controller.entry_subselect(args[1])</span>
                    <span class="s0">on_node_collapse: root.controller.close_subselection(args[1])</span>

<span class="s0">&lt;FileChooserListView&gt;:</span>
    <span class="s0">layout: layout</span>
    <span class="s0">FileChooserListLayout:</span>
        <span class="s0">id: layout</span>
        <span class="s0">controller: root</span>

<span class="s0">[FileListEntry@FloatLayout+TreeViewNode]:</span>
    <span class="s0">locked: False</span>
    <span class="s0">entries: []</span>
    <span class="s0">path: ctx.path</span>
    <span class="s0"># FIXME: is_selected is actually a read_only treeview property. In this</span>
    <span class="s0"># case, however, we're doing this because treeview only has single-selection</span>
    <span class="s0"># hardcoded in it. The fix to this would be to update treeview to allow</span>
    <span class="s0"># multiple selection.</span>
    <span class="s0">is_selected: self.path in ctx.controller().selection</span>

    <span class="s0">orientation: 'horizontal'</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">height: '48dp' if dp(1) &gt; 1 else '24dp'</span>
    <span class="s0"># Don't allow expansion of the ../ node</span>
    <span class="s0">is_leaf: not ctx.isdir or ctx.name.endswith('..' + ctx.sep) or self.locked</span>
    <span class="s0">on_touch_down: self.collide_point(*args[1].pos) and ctx.controller().entry_touched(self, args[1])</span>
    <span class="s0">on_touch_up: self.collide_point(*args[1].pos) and ctx.controller().entry_released(self, args[1])</span>
    <span class="s0">BoxLayout:</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size_hint_x: None</span>
        <span class="s0">width: root.width - dp(10)</span>
        <span class="s0">Label:</span>
            <span class="s0">id: filename</span>
            <span class="s0">text_size: self.width, None</span>
            <span class="s0">halign: 'left'</span>
            <span class="s0">shorten: True</span>
            <span class="s0">text: ctx.name</span>
            <span class="s0">font_name: ctx.controller().font_name</span>
        <span class="s0">Label:</span>
            <span class="s0">text_size: self.width, None</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">halign: 'right'</span>
            <span class="s0">text: '{}'.format(ctx.get_nice_size())</span>
            <span class="s0">font_name: ctx.controller().font_name</span>

<span class="s0">&lt;FileChooserIconLayout&gt;:</span>
    <span class="s0">on_entry_added: stacklayout.add_widget(args[1])</span>
    <span class="s0">on_entries_cleared: stacklayout.clear_widgets()</span>
    <span class="s0">ScrollView:</span>
        <span class="s0">id: scrollview</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size: root.size</span>
        <span class="s0">size_hint: None, None</span>
        <span class="s0">do_scroll_x: False</span>
        <span class="s0">Scatter:</span>
            <span class="s0">do_rotation: False</span>
            <span class="s0">do_scale: False</span>
            <span class="s0">do_translation: False</span>
            <span class="s0">size_hint_y: None</span>
            <span class="s0">height: stacklayout.height</span>
            <span class="s0">StackLayout:</span>
                <span class="s0">id: stacklayout</span>
                <span class="s0">width: scrollview.width</span>
                <span class="s0">size_hint_y: None</span>
                <span class="s0">height: self.minimum_height</span>
                <span class="s0">spacing: '10dp'</span>
                <span class="s0">padding: '10dp'</span>

<span class="s0">&lt;FileChooserIconView&gt;:</span>
    <span class="s0">layout: layout</span>
    <span class="s0">FileChooserIconLayout:</span>
        <span class="s0">id: layout</span>
        <span class="s0">controller: root</span>

<span class="s0">[FileIconEntry@Widget]:</span>
    <span class="s0">locked: False</span>
    <span class="s0">path: ctx.path</span>
    <span class="s0">selected: self.path in ctx.controller().selection</span>
    <span class="s0">size_hint: None, None</span>

    <span class="s0">on_touch_down: self.collide_point(*args[1].pos) and ctx.controller().entry_touched(self, args[1])</span>
    <span class="s0">on_touch_up: self.collide_point(*args[1].pos) and ctx.controller().entry_released(self, args[1])</span>
    <span class="s0">size: '100dp', '100dp'</span>

    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 1, 1, 1, 1 if self.selected else 0</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: 8, 8, 8, 8</span>
            <span class="s0">pos: root.pos</span>
            <span class="s0">size: root.size</span>
            <span class="s0">source: 'atlas://data/images/defaulttheme/filechooser_selected'</span>

    <span class="s0">Image:</span>
        <span class="s0">size: '48dp', '48dp'</span>
        <span class="s0">source: 'atlas://data/images/defaulttheme/filechooser_%s' % ('folder' if ctx.isdir else 'file')</span>
        <span class="s0">pos: root.x + dp(24), root.y + dp(40)</span>
    <span class="s0">Label:</span>
        <span class="s0">text: ctx.name</span>
        <span class="s0">font_name: ctx.controller().font_name</span>
        <span class="s0">text_size: (root.width, self.height)</span>
        <span class="s0">halign: 'center'</span>
        <span class="s0">shorten: True</span>
        <span class="s0">size: '100dp', '16dp'</span>
        <span class="s0">pos: root.x, root.y + dp(16)</span>
    <span class="s0">Label:</span>
        <span class="s0">text: '{}'.format(ctx.get_nice_size())</span>
        <span class="s0">font_name: ctx.controller().font_name</span>
        <span class="s0">font_size: '11sp'</span>
        <span class="s0">color: .8, .8, .8, 1</span>
        <span class="s0">size: '100dp', '16sp'</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">halign: 'center'</span>

<span class="s0">&lt;FileChooserProgress&gt;:</span>
    <span class="s0">pos_hint: {'x': 0, 'y': 0}</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 0, 0, 0, .8</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
    <span class="s0">Label:</span>
        <span class="s0">pos_hint: {'x': .2, 'y': .6}</span>
        <span class="s0">size_hint: .6, .2</span>
        <span class="s0">text: 'Opening %s' % root.path</span>
        <span class="s0">text_size: self.size</span>
        <span class="s0">halign: 'center'</span>
        <span class="s0">valign: 'middle'</span>
    <span class="s0">FloatLayout:</span>
        <span class="s0">pos_hint: {'x': .2, 'y': .4}</span>
        <span class="s0">size_hint: .6, .2</span>
        <span class="s0">ProgressBar:</span>
            <span class="s0">id: pb</span>
            <span class="s0">pos_hint: {'x': 0, 'center_y': .5}</span>
            <span class="s0">max: root.total</span>
            <span class="s0">value: root.index</span>
        <span class="s0">Label:</span>
            <span class="s0">pos_hint: {'x': 0}</span>
            <span class="s0">text: '%d / %d' % (root.index, root.total)</span>
            <span class="s0">size_hint_y: None</span>
            <span class="s0">height: self.texture_size[1]</span>
            <span class="s0">y: pb.center_y - self.height - 8</span>
            <span class="s0">font_size: '13sp'</span>
            <span class="s0">color: (.8, .8, .8, .8)</span>

    <span class="s0">AnchorLayout:</span>
        <span class="s0">pos_hint: {'x': .2, 'y': .2}</span>
        <span class="s0">size_hint: .6, .2</span>

        <span class="s0">Button:</span>
            <span class="s0">text: 'Cancel'</span>
            <span class="s0">size_hint: None, None</span>
            <span class="s0">size: 150, 44</span>
            <span class="s0">on_release: root.cancel()</span>



<span class="s0"># Switch widget</span>
<span class="s0">&lt;Switch&gt;:</span>
    <span class="s0">active_norm_pos: max(0., min(1., (int(self.active) + self.touch_distance / sp(41))))</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 1, 1, 1</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">source: 'atlas://data/images/defaulttheme/switch-background{}'.format('_disabled' if self.disabled else '')</span>
            <span class="s0">size: sp(83), sp(32)</span>
            <span class="s0">pos: int(self.center_x - sp(41)), int(self.center_y - sp(16))</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 1, 1, 1</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">source: 'atlas://data/images/defaulttheme/switch-button{}'.format('_disabled' if self.disabled else '')</span>
            <span class="s0">size: sp(43), sp(32)</span>
            <span class="s0">pos: int(self.center_x - sp(41) + self.active_norm_pos * sp(41)), int(self.center_y - sp(16))</span>


<span class="s0"># ModalView widget</span>
<span class="s0">&lt;ModalView&gt;:</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: root.overlay_color[:3] + [root.overlay_color[-1] * self._anim_alpha]</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">size: self._window.size if self._window else (0, 0)</span>

        <span class="s0">Color:</span>
            <span class="s0">rgba: root.background_color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">source: root.background</span>
            <span class="s0">border: root.border</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>


<span class="s0"># Popup widget</span>
<span class="s0">&lt;Popup&gt;:</span>
    <span class="s0">_container: container</span>
    <span class="s0">GridLayout:</span>
        <span class="s0">padding: '12dp'</span>
        <span class="s0">cols: 1</span>
        <span class="s0">size_hint: None, None</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size: root.size</span>

        <span class="s0">Label:</span>
            <span class="s0">text: root.title</span>
            <span class="s0">color: root.title_color</span>
            <span class="s0">size_hint_y: None</span>
            <span class="s0">height: self.texture_size[1] + dp(16)</span>
            <span class="s0">text_size: self.width - dp(16), None</span>
            <span class="s0">font_size: root.title_size</span>
            <span class="s0">font_name: root.title_font</span>
            <span class="s0">halign: root.title_align</span>

        <span class="s0">Widget:</span>
            <span class="s0">size_hint_y: None</span>
            <span class="s0">height: dp(4)</span>
            <span class="s0">canvas:</span>
                <span class="s0">Color:</span>
                    <span class="s0">rgba: root.separator_color</span>
                <span class="s0">Rectangle:</span>
                    <span class="s0">pos: self.x, self.y + root.separator_height / 2.</span>
                    <span class="s0">size: self.width, root.separator_height</span>

        <span class="s0">BoxLayout:</span>
            <span class="s0">id: container</span>

<span class="s0"># =============================================================================</span>
<span class="s0"># Spinner widget</span>
<span class="s0"># =============================================================================</span>

<span class="s0">&lt;SpinnerOption&gt;:</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">height: '48dp'</span>

<span class="s0">&lt;Spinner&gt;:</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/spinner'</span>
    <span class="s0">background_disabled_normal: 'atlas://data/images/defaulttheme/spinner_disabled'</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/spinner_pressed'</span>

<span class="s0"># =============================================================================</span>
<span class="s0"># ActionBar widget</span>
<span class="s0"># =============================================================================</span>

<span class="s0">&lt;ActionBar&gt;:</span>
    <span class="s0">height: '48dp'</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">spacing: '4dp'</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.background_color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">border: root.border</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
            <span class="s0">source: self.background_image</span>

<span class="s0">&lt;ActionView&gt;:</span>
    <span class="s0">orientation: 'horizontal'</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.background_color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
            <span class="s0">source: self.background_image</span>

<span class="s0">&lt;ActionSeparator&gt;:</span>
    <span class="s0">size_hint_x: None</span>
    <span class="s0">minimum_width: '2sp'</span>
    <span class="s0">width: self.minimum_width</span>
    <span class="s0">canvas:</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.x, self.y + sp(4)</span>
            <span class="s0">size: self.width, self.height - sp(8)</span>
            <span class="s0">source: self.background_image</span>

<span class="s0">&lt;ActionButton,ActionToggleButton&gt;:</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/' + ('action_bar' if self.inside_group else 'action_item')</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/action_item_down'</span>
    <span class="s0">size_hint_x: None if not root.inside_group else 1</span>
    <span class="s0">width: [dp(48) if (root.icon and not root.inside_group) else max(dp(48), (self.texture_size[0] + dp(32))), self.size_hint_x][0]</span>
    <span class="s0">color: self.color[:3] + [0 if (root.icon and not root.inside_group) else 1]</span>

    <span class="s0">Image:</span>
        <span class="s0">fit_mode: &quot;contain&quot;</span>
        <span class="s0">opacity: 1 if (root.icon and not root.inside_group) else 0</span>
        <span class="s0">source: root.icon</span>
        <span class="s0">mipmap: root.mipmap</span>
        <span class="s0">pos: root.x + dp(4), root.y + dp(4)</span>
        <span class="s0">size: root.width - dp(8), root.height - sp(8)</span>

<span class="s0">&lt;ActionLabel&gt;:</span>
    <span class="s0">size_hint_x: None if not root.inside_group else 1</span>
    <span class="s0">width: self.texture_size[0] + dp(32)</span>

<span class="s0">&lt;ActionGroup&gt;:</span>
    <span class="s0">size_hint_x: None</span>
    <span class="s0">width: self.texture_size[0] + dp(32)</span>

<span class="s0">&lt;ActionCheck&gt;:</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/action_bar' if self.inside_group else 'atlas://data/images/defaulttheme/action_item'</span>

<span class="s0">&lt;ActionPreviousImage@Image&gt;:</span>
    <span class="s0">temp_width: 0</span>
    <span class="s0">temp_height: 0</span>

<span class="s0">&lt;ActionPreviousButton@Button&gt;:</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/action_item'</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/action_item_down'</span>

<span class="s0">&lt;ActionPrevious&gt;:</span>
    <span class="s0">size_hint_x: 1</span>
    <span class="s0">minimum_width: layout.minimum_width + min(sp(100), title.width)</span>
    <span class="s0">important: True</span>
    <span class="s0">GridLayout:</span>
        <span class="s0">id: layout</span>
        <span class="s0">rows: 1</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size_hint_x: None</span>
        <span class="s0">width: self.minimum_width</span>
        <span class="s0">ActionPreviousButton:</span>
            <span class="s0">on_press: root.dispatch('on_press')</span>
            <span class="s0">on_release: root.dispatch('on_release')</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">width: prevlayout.width</span>
            <span class="s0">GridLayout:</span>
                <span class="s0">id: prevlayout</span>
                <span class="s0">rows: 1</span>
                <span class="s0">width: self.minimum_width</span>
                <span class="s0">height: self.parent.height</span>
                <span class="s0">pos: self.parent.pos</span>
                <span class="s0">ActionPreviousImage:</span>
                    <span class="s0">id: prev_icon_image</span>
                    <span class="s0">source: root.previous_image</span>
                    <span class="s0">opacity: 1 if root.with_previous else 0</span>
                    <span class="s0">fit_mode: &quot;contain&quot;</span>
                    <span class="s0">size_hint_x: None</span>
                    <span class="s0">temp_width: root.previous_image_width or dp(prev_icon_image.texture_size[0])</span>
                    <span class="s0">temp_height: root.previous_image_height or dp(prev_icon_image.texture_size[1])</span>
                    <span class="s0">width:</span>
                        <span class="s0">(self.temp_width if self.temp_height &lt;= self.height else \</span>
                        <span class="s0">self.temp_width * (self.height / self.temp_height)) \</span>
                        <span class="s0">if self.texture else dp(8)</span>
                    <span class="s0">mipmap: root.mipmap</span>
                <span class="s0">ActionPreviousImage:</span>
                    <span class="s0">id: app_icon_image</span>
                    <span class="s0">source: root.app_icon</span>
                    <span class="s0">fit_mode: &quot;contain&quot;</span>
                    <span class="s0">size_hint_x: None</span>
                    <span class="s0">temp_width: root.app_icon_width or dp(app_icon_image.texture_size[0])</span>
                    <span class="s0">temp_height: root.app_icon_height or dp(app_icon_image.texture_size[1])</span>
                    <span class="s0">width:</span>
                        <span class="s0">(self.temp_width if self.temp_height &lt;= self.height else \</span>
                        <span class="s0">self.temp_width * (self.height / self.temp_height)) \</span>
                        <span class="s0">if self.texture and root.app_icon else 0</span>
                    <span class="s0">mipmap: root.mipmap</span>
                <span class="s0">Widget:</span>
                    <span class="s0">size_hint_x: None</span>
                    <span class="s0">width: '5sp'</span>
    <span class="s0">Label:</span>
        <span class="s0">id: title</span>
        <span class="s0">text: root.title</span>
        <span class="s0">text_size: self.size</span>
        <span class="s0">color: root.color</span>
        <span class="s0">markup: root.markup</span>
        <span class="s0">shorten: True</span>
        <span class="s0">shorten_from: 'right'</span>
        <span class="s0">halign: 'left'</span>
        <span class="s0">valign: 'middle'</span>

<span class="s0">&lt;ActionGroup&gt;:</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/action_group'</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/action_group_down'</span>
    <span class="s0">background_disabled_normal: 'atlas://data/images/defaulttheme/action_group_disabled'</span>
    <span class="s0">border: 30, 30, 3, 3</span>
    <span class="s0">ActionSeparator:</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">size: root.separator_width, root.height</span>
        <span class="s0">opacity: 1 if root.use_separator else 0</span>
        <span class="s0">background_image: root.separator_image if root.use_separator else 'action_view'</span>

<span class="s0">&lt;ActionOverflow&gt;:</span>
    <span class="s0">border: 3, 3, 3, 3</span>
    <span class="s0">background_normal: 'atlas://data/images/defaulttheme/action_item'</span>
    <span class="s0">background_down: 'atlas://data/images/defaulttheme/action_item_down'</span>
    <span class="s0">background_disabled_normal: 'atlas://data/images/defaulttheme/button_disabled'</span>
    <span class="s0">size_hint_x: None</span>
    <span class="s0">minimum_width: '48sp'</span>
    <span class="s0">width: self.texture_size[0] if self.texture else self.minimum_width</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 1, 1, 1</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: root.center_x - sp(16), root.center_y - sp(16)</span>
            <span class="s0">size: sp(32), sp(32)</span>
            <span class="s0">source: root.overflow_image</span>

<span class="s0">&lt;ActionDropDown&gt;:</span>
    <span class="s0">auto_width: False</span>


<span class="s0"># =============================================================================</span>
<span class="s0"># Accordion widget</span>
<span class="s0"># =============================================================================</span>

<span class="s0">[AccordionItemTitle@Label]:</span>
    <span class="s0">text: ctx.title</span>
    <span class="s0">normal_background: ctx.item.background_normal if ctx.item.collapse else ctx.item.background_selected</span>
    <span class="s0">disabled_background: ctx.item.background_disabled_normal if ctx.item.collapse else ctx.item.background_disabled_selected</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.disabled_color if self.disabled else self.color</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">source: self.disabled_background if self.disabled else self.normal_background</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">PushMatrix</span>
        <span class="s0">Translate:</span>
            <span class="s0">xy: self.center_x, self.center_y</span>
        <span class="s0">Rotate:</span>
            <span class="s0">angle: 90 if ctx.item.orientation == 'horizontal' else 0</span>
            <span class="s0">axis: 0, 0, 1</span>
        <span class="s0">Translate:</span>
            <span class="s0">xy: -self.center_x, -self.center_y</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">PopMatrix</span>


<span class="s0">&lt;AccordionItem&gt;:</span>
    <span class="s0">container: container</span>
    <span class="s0">container_title: container_title</span>

    <span class="s0">BoxLayout:</span>
        <span class="s0">orientation: root.orientation</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">BoxLayout:</span>
            <span class="s0">size_hint_x: None if root.orientation == 'horizontal' else 1</span>
            <span class="s0">size_hint_y: None if root.orientation == 'vertical' else 1</span>
            <span class="s0">width: root.min_space if root.orientation == 'horizontal' else 100</span>
            <span class="s0">height: root.min_space if root.orientation == 'vertical' else 100</span>
            <span class="s0">id: container_title</span>

        <span class="s0">StencilView:</span>
            <span class="s0">id: sv</span>

            <span class="s0">BoxLayout:</span>
                <span class="s0">id: container</span>
                <span class="s0">pos: sv.pos</span>
                <span class="s0">size: root.content_size</span>


<span class="s0"># =============================================================================</span>
<span class="s0"># Settings</span>
<span class="s0"># =============================================================================</span>

<span class="s0">&lt;SettingSpacer&gt;:</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">height: 5</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: .2, .2, .2</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.x, self.center_y</span>
            <span class="s0">size: self.width, 1</span>

<span class="s0">&lt;SettingItem&gt;:</span>
    <span class="s0">size_hint: .25, None</span>
    <span class="s0">height: labellayout.texture_size[1] + dp(10)</span>
    <span class="s0">content: content</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 47 / 255., 167 / 255., 212 / 255., self.selected_alpha</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.x, self.y + 1</span>
            <span class="s0">size: self.size</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: .2, .2, .2</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.x, self.y - 2</span>
            <span class="s0">size: self.width, 1</span>

    <span class="s0">BoxLayout:</span>
        <span class="s0">pos: root.pos</span>

        <span class="s0">Label:</span>
            <span class="s0">size_hint_x: .66</span>
            <span class="s0">id: labellayout</span>
            <span class="s0">markup: True</span>
            <span class="s0">text: u'{0}\n[size=13sp][color=999999]{1}[/color][/size]'.format(root.title or '', root.desc or '')</span>
            <span class="s0">font_size: '15sp'</span>
            <span class="s0">text_size: self.width - 32, None</span>

        <span class="s0">BoxLayout:</span>
            <span class="s0">id: content</span>
            <span class="s0">size_hint_x: .33</span>


<span class="s0">&lt;SettingBoolean&gt;:</span>
    <span class="s0">Switch:</span>
        <span class="s0">text: 'Boolean'</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">active: bool(root.values.index(root.value)) if root.value in root.values else False</span>
        <span class="s0">on_active: root.value = root.values[int(args[1])]</span>

<span class="s0">&lt;SettingString&gt;:</span>
    <span class="s0">Label:</span>
        <span class="s0">text: root.value or ''</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">font_size: '15sp'</span>

<span class="s0">&lt;SettingPath&gt;:</span>
    <span class="s0">Label:</span>
        <span class="s0">text: root.value or ''</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">font_size: '15sp'</span>

<span class="s0">#:import kivy kivy</span>
<span class="s0">&lt;SettingColor&gt;:</span>
    <span class="s0">BoxLayout:</span>
        <span class="s0">Label:</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">width: 44</span>
            <span class="s0">padding: (0, 5)</span>
            <span class="s0">canvas.before:</span>
                <span class="s0"># white border to see that there's a color tile at dark colors e.g. black</span>
                <span class="s0">Color:</span>
                    <span class="s0">rgba: (1,1,1,1.)</span>
                <span class="s0">Line:</span>
                    <span class="s0">rectangle: self.x,self.y,self.width,self.height</span>
                <span class="s0">Color:</span>
                    <span class="s0">rgba: kivy.utils.get_color_from_hex(root.value) if root.value else (1,1,1,1.)</span>
                <span class="s0">Rectangle:</span>
                    <span class="s0">pos: self.pos</span>
                    <span class="s0">size: self.size</span>

        <span class="s0">Label:</span>
            <span class="s0">text: root.value or ''</span>
            <span class="s0">pos: root.pos</span>
            <span class="s0">font_size: '15sp'</span>
            <span class="s0">text_size: self.size</span>
            <span class="s0">valign: 'middle'</span>
            <span class="s0">halign: 'center'</span>
            <span class="s0">padding: (5,0)</span>

<span class="s0">&lt;SettingOptions&gt;:</span>
    <span class="s0">Label:</span>
        <span class="s0">text: root.value or ''</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">font_size: '15sp'</span>

<span class="s0">&lt;SettingTitle&gt;:</span>
    <span class="s0">text: self.title</span>
    <span class="s0">text_size: self.width - 32, None</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">height: max(dp(20), self.texture_size[1] + dp(20))</span>
    <span class="s0">color: (.9, .9, .9, 1)</span>
    <span class="s0">font_size: '15sp'</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: .15, .15, .15, .5</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.x, self.y + 2</span>
            <span class="s0">size: self.width, self.height - 2</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: .2, .2, .2</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.x, self.y - 2</span>
            <span class="s0">size: self.width, 1</span>

<span class="s0">&lt;SettingSidebarLabel&gt;:</span>
    <span class="s0">size_hint: 1, None</span>
    <span class="s0">text_size: self.width - 32, None</span>
    <span class="s0">height: self.texture_size[1] + dp(20)</span>
    <span class="s0">font_size: '15sp'</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: 47 / 255., 167 / 255., 212 / 255., int(self.selected)</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>

<span class="s0">&lt;SettingsPanel&gt;:</span>
    <span class="s0">spacing: 5</span>
    <span class="s0">padding: 5</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">height: self.minimum_height</span>

    <span class="s0">Label:</span>
        <span class="s0">size_hint_y: None</span>
        <span class="s0">text: root.title</span>
        <span class="s0">text_size: self.width - 32, None</span>
        <span class="s0">height: max(50, self.texture_size[1] + 20)</span>
        <span class="s0">color: (.5, .5, .5, 1)</span>
        <span class="s0">font_size: '15sp'</span>

        <span class="s0">canvas.after:</span>
            <span class="s0">Color:</span>
                <span class="s0">rgb: .2, .2, .2</span>
            <span class="s0">Rectangle:</span>
                <span class="s0">pos: self.x, self.y - 2</span>
                <span class="s0">size: self.width, 1</span>

<span class="s0">&lt;Settings&gt;:</span>
    <span class="s0">orientation: 'horizontal'</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgb: 0, 0, 0</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>

<span class="s0">&lt;InterfaceWithSidebar&gt;:</span>
    <span class="s0">orientation: 'horizontal'</span>
    <span class="s0">menu: menu</span>
    <span class="s0">content: content</span>
    <span class="s0">MenuSidebar:</span>
        <span class="s0">id: menu</span>
    <span class="s0">ContentPanel:</span>
        <span class="s0">id: content</span>
        <span class="s0">current_uid: menu.selected_uid</span>

<span class="s0">&lt;InterfaceWithSpinner&gt;:</span>
    <span class="s0">orientation: 'vertical'</span>
    <span class="s0">menu: menu</span>
    <span class="s0">content: content</span>
    <span class="s0">MenuSpinner:</span>
        <span class="s0">id: menu</span>
    <span class="s0">ContentPanel:</span>
        <span class="s0">id: content</span>
        <span class="s0">current_uid: menu.selected_uid</span>

<span class="s0">&lt;MenuSpinner&gt;:</span>
    <span class="s0">orientation: 'horizontal'</span>
    <span class="s0">size_hint_y: None</span>
    <span class="s0">height: '50dp'</span>
    <span class="s0">spinner: spinner</span>
    <span class="s0">spinner_text: spinner.text</span>
    <span class="s0">close_button: button</span>
    <span class="s0">Spinner:</span>
        <span class="s0">id: spinner</span>
    <span class="s0">Button:</span>
        <span class="s0">text: 'Close'</span>
        <span class="s0">id: button</span>
        <span class="s0">size_hint_x: None</span>
        <span class="s0">width: min(dp(200), 0.4*root.width)</span>
        <span class="s0">font_size: '15sp'</span>


<span class="s0">&lt;MenuSidebar&gt;:</span>
    <span class="s0">size_hint_x: None</span>
    <span class="s0">width: '200dp'</span>
    <span class="s0">buttons_layout: menu</span>
    <span class="s0">close_button: button</span>
    <span class="s0">GridLayout:</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">cols: 1</span>
        <span class="s0">id: menu</span>
        <span class="s0">padding: 5</span>

        <span class="s0">canvas.after:</span>
            <span class="s0">Color:</span>
                <span class="s0">rgb: .2, .2, .2</span>
            <span class="s0">Rectangle:</span>
                <span class="s0">pos: self.right - 1, self.y</span>
                <span class="s0">size: 1, self.height</span>

    <span class="s0">Button:</span>
        <span class="s0">text: 'Close'</span>
        <span class="s0">id: button</span>
        <span class="s0">size_hint: None, None</span>
        <span class="s0">width: root.width - dp(20)</span>
        <span class="s0">height: max(50, self.texture_size[1] + dp(20))</span>
        <span class="s0">pos: root.x + dp(10), root.y + dp(10)</span>
        <span class="s0">font_size: '15sp'</span>

<span class="s0">&lt;ContentPanel&gt;:</span>
    <span class="s0">do_scroll_x: False</span>
    <span class="s0">container: content</span>
    <span class="s0">GridLayout:</span>
        <span class="s0">id: content</span>
        <span class="s0">cols: 1</span>
        <span class="s0">size_hint_y: None</span>
        <span class="s0">height: self.minimum_height</span>

<span class="s0">&lt;InterfaceWithTabbedPanel&gt;:</span>
    <span class="s0">tabbedpanel: tp</span>
    <span class="s0">close_button: button</span>
    <span class="s0">TabbedPanel:</span>
        <span class="s0">id: tp</span>
        <span class="s0">size: root.size</span>
        <span class="s0">pos: root.pos</span>
        <span class="s0">#do_default_tab: False</span>
        <span class="s0">background_color: (0,0,0,1)</span>
    <span class="s0">Button:</span>
        <span class="s0">id: button</span>
        <span class="s0">text: 'Close'</span>
        <span class="s0">size_hint: None, None</span>
        <span class="s0">height: '45dp'</span>
        <span class="s0">width: min(dp(200), 0.3*root.width)</span>
        <span class="s0">x: root.x + root.width - self.width</span>
        <span class="s0">y: root.y + root.height - self.height</span>

<span class="s0">&lt;ScrollView&gt;:</span>
    <span class="s0">_handle_y_pos: (self.right - self.bar_width - self.bar_margin) if self.bar_pos_y == 'right' else (self.x + self.bar_margin), self.y + self.height * self.vbar[0]</span>
    <span class="s0">_handle_y_size: min(self.bar_width, self.width), self.height * self.vbar[1]</span>
    <span class="s0">_handle_x_pos: self.x + self.width * self.hbar[0], (self.y + self.bar_margin) if self.bar_pos_x == 'bottom' else (self.top - self.bar_margin - self.bar_width)</span>
    <span class="s0">_handle_x_size: self.width * self.hbar[1], min(self.bar_width, self.height)</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self._bar_color if (self.do_scroll_y and self.viewport_size[1] &gt; self.height) else [0, 0, 0, 0]</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: root._handle_y_pos or (0, 0)</span>
            <span class="s0">size: root._handle_y_size or (0, 0)</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self._bar_color if (self.do_scroll_x and self.viewport_size[0] &gt; self.width) else [0, 0, 0, 0]</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: root._handle_x_pos or (0, 0)</span>
            <span class="s0">size: root._handle_x_size or (0, 0)</span>

<span class="s0"># =============================================================================</span>
<span class="s0"># Video player</span>
<span class="s0"># =============================================================================</span>

<span class="s0">&lt;VideoPlayerPreview&gt;:</span>
    <span class="s0">pos_hint: {'x': 0, 'y': 0}</span>
    <span class="s0">image_overlay_play: 'atlas://data/images/defaulttheme/player-play-overlay'</span>
    <span class="s0">image_loading: 'data/images/image-loading.zip'</span>
    <span class="s0">Image:</span>
        <span class="s0">source: root.source</span>
        <span class="s0">color: (.5, .5, .5, 1) if root.source else (0, 0, 0, 0)</span>
        <span class="s0">pos_hint: {'x': 0, 'y': 0}</span>
    <span class="s0">Image:</span>
        <span class="s0">source: root.image_overlay_play if not root.click_done else root.image_loading</span>
        <span class="s0">pos_hint: {'x': 0, 'y': 0}</span>


<span class="s0">&lt;VideoPlayerAnnotation&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.annotation['bgcolor'] if 'bgcolor' in self.annotation else (0, 0, 0, 0.8)</span>
        <span class="s0">BorderImage:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
            <span class="s0">source: self.annotation['bgsource'] if 'bgsource' in self.annotation else None</span>
            <span class="s0">border: self.annotation['border'] if 'border' in self.annotation else (0, 0, 0, 0)</span>
    <span class="s0">size_hint: self.annotation['size_hint'] if 'size_hint' in self.annotation else (None, None)</span>
    <span class="s0">size: self.annotation['size'] if 'size' in self.annotation else (self.texture_size[0] + 20, self.texture_size[1] + 20)</span>
    <span class="s0">pos_hint: self.annotation['pos_hint'] if 'pos_hint' in self.annotation else {'center_x': .5, 'y': .05}</span>

<span class="s0">&lt;VideoPlayer&gt;:</span>
    <span class="s0">container: container</span>
    <span class="s0">cols: 1</span>

    <span class="s0">FloatLayout:</span>
        <span class="s0">cols: 1</span>
        <span class="s0">id: container</span>

    <span class="s0">GridLayout:</span>
        <span class="s0">rows: 1</span>
        <span class="s0">size_hint_y: None</span>
        <span class="s0">height: '44dp'</span>

        <span class="s0">VideoPlayerStop:</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">video: root</span>
            <span class="s0">width: '44dp'</span>
            <span class="s0">source: root.image_stop</span>
            <span class="s0">fit_mode: &quot;contain&quot;</span>

        <span class="s0">VideoPlayerPlayPause:</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">video: root</span>
            <span class="s0">width: '44dp'</span>
            <span class="s0">source: root.image_pause if root.state == 'play' else root.image_play</span>
            <span class="s0">fit_mode: &quot;contain&quot;</span>

        <span class="s0">VideoPlayerVolume:</span>
            <span class="s0">video: root</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">width: '44dp'</span>
            <span class="s0">source: root.image_volumehigh if root.volume &gt; 0.8 else (root.image_volumemedium if root.volume &gt; 0.4 else (root.image_volumelow if root.volume &gt; 0 else root.image_volumemuted))</span>
            <span class="s0">fit_mode: &quot;contain&quot;</span>

        <span class="s0">Widget:</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">width: 5</span>

        <span class="s0">VideoPlayerProgressBar:</span>
            <span class="s0">video: root</span>
            <span class="s0">max: max(root.duration, root.position, 1)</span>
            <span class="s0">value: root.position</span>

        <span class="s0">Widget:</span>
            <span class="s0">size_hint_x: None</span>
            <span class="s0">width: 10</span>

<span class="s0"># =============================================================================</span>
<span class="s0"># Checkbox</span>
<span class="s0"># =============================================================================</span>

<span class="s0">&lt;CheckBox&gt;:</span>
    <span class="s0">_checkbox_state_image:</span>
        <span class="s0">self.background_checkbox_down \</span>
        <span class="s0">if self.active else self.background_checkbox_normal</span>
    <span class="s0">_checkbox_disabled_image:</span>
        <span class="s0">self.background_checkbox_disabled_down \</span>
        <span class="s0">if self.active else self.background_checkbox_disabled_normal</span>
    <span class="s0">_radio_state_image:</span>
        <span class="s0">self.background_radio_down \</span>
        <span class="s0">if self.active else self.background_radio_normal</span>
    <span class="s0">_radio_disabled_image:</span>
        <span class="s0">self.background_radio_disabled_down \</span>
        <span class="s0">if self.active else self.background_radio_disabled_normal</span>
    <span class="s0">_checkbox_image:</span>
        <span class="s0">self._checkbox_disabled_image \</span>
        <span class="s0">if self.disabled else self._checkbox_state_image</span>
    <span class="s0">_radio_image:</span>
        <span class="s0">self._radio_disabled_image \</span>
        <span class="s0">if self.disabled else self._radio_state_image</span>
    <span class="s0">canvas:</span>
        <span class="s0">Color:</span>
            <span class="s0">rgba: self.color</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">source: self._radio_image if self.group else self._checkbox_image</span>
            <span class="s0">size: sp(32), sp(32)</span>
            <span class="s0">pos: int(self.center_x - sp(16)), int(self.center_y - sp(16))</span>

<span class="s0"># =============================================================================</span>
<span class="s0"># Screen Manager</span>
<span class="s0"># =============================================================================</span>

<span class="s0">&lt;ScreenManager&gt;:</span>
    <span class="s0">canvas.before:</span>
        <span class="s0">StencilPush</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">StencilUse</span>
    <span class="s0">canvas.after:</span>
        <span class="s0">StencilUnUse</span>
        <span class="s0">Rectangle:</span>
            <span class="s0">pos: self.pos</span>
            <span class="s0">size: self.size</span>
        <span class="s0">StencilPop</span>

<span class="s0"># =============================================================================</span>
<span class="s0"># Color Picker</span>
<span class="s0"># =============================================================================</span>
<span class="s0">&lt;ColorPicker_Input@TextInput&gt;</span>
    <span class="s0">multiline: False</span>
    <span class="s0">mroot: None</span>
    <span class="s0">padding: sp(5)</span>
    <span class="s0">border: 4, 9, 4, 9</span>

<span class="s0">&lt;ColorPicker_Label@Label&gt;</span>
    <span class="s0">mroot: None</span>
    <span class="s0">size_hint_x: None</span>
    <span class="s0">width: '30sp'</span>
    <span class="s0">text_size: self.size</span>
    <span class="s0">halign: &quot;center&quot;</span>
    <span class="s0">valign: &quot;middle&quot;</span>

<span class="s0">&lt;ColorPicker_Selector@BoxLayout&gt;</span>
    <span class="s0">foreground_color: None</span>
    <span class="s0">text: ''</span>
    <span class="s0">mroot: None</span>
    <span class="s0">mode: 'rgb'</span>
    <span class="s0">color: 0</span>
    <span class="s0">spacing: '2sp'</span>
    <span class="s0">ColorPicker_Label:</span>
        <span class="s0">text: root.text</span>
        <span class="s0">mroot: root.mroot</span>
        <span class="s0">color: root.foreground_color or (1, 1, 1, 1)</span>
    <span class="s0">AnchorLayout:</span>
        <span class="s0">size_hint_x: None</span>
        <span class="s0">width: '50sp'</span>
        <span class="s0">ColorPicker_Input:</span>
            <span class="s0">mroot: root.mroot</span>
            <span class="s0">text: str(int(sldr.value))</span>
            <span class="s0">size_hint_y: None</span>
            <span class="s0">height: '28sp'</span>
            <span class="s0">on_text:</span>
                <span class="s0">root.mroot._trigger_update_clr(root.mode, root.clr_idx, args[1])</span>
    <span class="s0">Slider:</span>
        <span class="s0">id: sldr</span>
        <span class="s0">size_hint: 1, .25</span>
        <span class="s0">pos_hint: {'center_y':.5}</span>
        <span class="s0">range: 0, 255</span>
        <span class="s0">value: root.color * 255</span>
        <span class="s0">on_value:</span>
            <span class="s0">root.mroot._trigger_update_clr(root.mode, root.clr_idx, args[1])</span>

<span class="s0">&lt;ColorWheel&gt;:</span>
    <span class="s0">_origin: self.center</span>
    <span class="s0">_radius: 0.45 * min(self.size)</span>

<span class="s0">&lt;ColorPicker&gt;:</span>
    <span class="s0">foreground_color: (1, 1, 1, 1) if self.hsv[2] * root.color[3] &lt; .5 else (0, 0, 0, 1)</span>
    <span class="s0">wheel: wheel</span>
    <span class="s0">BoxLayout:</span>
        <span class="s0">orientation: 'vertical' if root.width &lt; root.height else 'horizontal'</span>
        <span class="s0">spacing: '5sp'</span>
        <span class="s0">StackLayout:</span>
            <span class="s0">orientation: 'tb-lr'</span>
            <span class="s0">size_hint_y: None if root.width &lt; root.height else 1</span>
            <span class="s0">height: sp(33) * 4 if root.width &lt; root.height else self.height</span>
            <span class="s0">canvas:</span>
                <span class="s0">Color:</span>
                    <span class="s0">rgba: root.color</span>
                <span class="s0">Rectangle:</span>
                    <span class="s0">size: self.size</span>
                    <span class="s0">pos: self.pos</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">text: 'R'</span>
                <span class="s0">clr_idx: 0</span>
                <span class="s0">color: root.color[0]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">text: 'G'</span>
                <span class="s0">clr_idx: 1</span>
                <span class="s0">color: root.color[1]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">text: 'B'</span>
                <span class="s0">clr_idx: 2</span>
                <span class="s0">color: root.color[2]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">text: 'A'</span>
                <span class="s0">clr_idx: 3</span>
                <span class="s0">color: root.color[3]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">mode: 'hsv'</span>
                <span class="s0">text: 'H'</span>
                <span class="s0">clr_idx: 0</span>
                <span class="s0">color: root.hsv[0]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">mode: 'hsv'</span>
                <span class="s0">text: 'S'</span>
                <span class="s0">clr_idx: 1</span>
                <span class="s0">color: root.hsv[1]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">ColorPicker_Selector:</span>
                <span class="s0">mroot: root</span>
                <span class="s0">mode: 'hsv'</span>
                <span class="s0">text: 'V'</span>
                <span class="s0">clr_idx: 2</span>
                <span class="s0">color: root.hsv[2]</span>
                <span class="s0">foreground_color: root.foreground_color</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

            <span class="s0">BoxLayout:</span>
                <span class="s0">size_hint_y: None if root.width &lt; root.height else 0.125</span>
                <span class="s0">size_hint_x: .5 if root.width &lt; root.height else 1</span>
                <span class="s0">height: '33sp' if root.width &lt; root.height else self.height</span>

                <span class="s0">spacing: '2sp'</span>
                <span class="s0">ColorPicker_Label:</span>
                    <span class="s0">mroot: root</span>
                    <span class="s0">text: 'X'</span>
                    <span class="s0">color: root.foreground_color</span>
                <span class="s0">AnchorLayout:</span>
                    <span class="s0">ColorPicker_Input:</span>
                        <span class="s0">size_hint_y: None</span>
                        <span class="s0">height: '28sp'</span>
                        <span class="s0">mroot: root</span>
                        <span class="s0">text: str(root.hex_color)</span>
                        <span class="s0">on_text: root._trigger_update_hex(args[1])</span>


        <span class="s0">ColorWheel:</span>
            <span class="s0">id: wheel</span>
            <span class="s0">color: root.color</span>
            <span class="s0">on_color: root.set_color(args[1][:3])</span>
</pre>
</body>
</html>